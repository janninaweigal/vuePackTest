webpackJsonp([12],{"1byP":function(t,e){},H65k:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),r=a("mvHQ"),o=a.n(r),c=a("woOf"),s=a.n(c),l=a("QeYY"),d=a("bLuo"),u=a("iOZI"),h=a("94jl"),p=a("7s5I"),f={name:"Bidding",components:{Crumbs:l.a,IncomeModel:d.a,PayModel:u.a,audit:p.a},mixins:[h.a],data:function(){var t=this;return{contractArray:{1:{modal:"income",name:"收入"},2:{modal:"pay",name:"支出"}},keMuArray:{1:"在建工程",2:"费用",3:"其他"},jieOrDai:{1:"借",2:"贷"},incomeType:{1:"应收",2:"实收"},payType:{1:"应付",2:"实付"},contractList:[],yiFangList:[],yiFangUnit:{},showSelect:!1,contract:"",isScreen:!1,searchData:{contractType:"",startTime:null,endTime:null,yifangId:null,ascending:!1,orderBy:"id",pageNo:1,pageSize:10},accountList:[],isDisabled:!1,listUrl:"/specialAccount/searchSpecialAccount/list",columns:[{type:"index",title:"序号",width:60,align:"center",fixed:"left",indexMethod:this.indexMethod},{title:"日期",key:"date",render:function(e,a){return e("div",t.$moment(a.row.date).format("YYYY年MM月DD日"))}},{title:"凭证号",key:"pingzhen",render:function(e,a){return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){var e=s()({},a.row),n=t.contractArray[e.shouzhi_type].modal;e.date=new Date(e.date),t.$nextTick(function(){t.isDisabled=!0,t.$refs[n].showModal(e)})}}},a.row.pingzhen)}},{title:"摘要",key:"zhaiyao"},{title:"对方科目",key:"duifang_kemu",render:function(e,a){return e("div",t.keMuArray[a.row.duifang_kemu])}},{title:"借(收入)方",key:"jiefang_money"},{title:"贷(收入)方",key:"daifang_money"},{title:"借或贷",key:"jie_or_dai",render:function(e,a){return e("div",t.jieOrDai[a.row.jie_or_dai])}},{title:"余额",key:"balance"},{title:"往来单位",key:"wanglai_danwei",render:function(e,a){var n=a.row.wanglai_danwei;return e("div",n?t.yiFangUnit[n]:"")}},{align:"center",title:"审核状态",key:"auditStatus",fixed:"right",width:120,render:function(e,a){return t.getAuditDetail(e,a)}}]}},created:function(){this.getYiFangInfo(),this.getContractList(),this.searchList()},methods:{searchList:function(){var t=this;t.search(t.getNewSearchData(),function(e,a){if(e){var n=a.data;t.accountList=n.specialAccountModelList,t.total=n.totalCount}})},getYiFangInfo:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxGetUtil("/contract/searchYiFang",{},function(e){if(t.$Spin.hide(),1===e.code){var a=e.data,n={},r=!0,c=!1,s=void 0;try{for(var l,d=i()(a);!(r=(l=d.next()).done);r=!0){var u=l.value;n[u.id]=u.name}}catch(t){c=!0,s=t}finally{try{!r&&d.return&&d.return()}finally{if(c)throw s}}t.yiFangList=a,t.yiFangUnit=n,sessionStorage.setItem("yiFangUnit",o()(n))}else t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},getContractList:function(){var t=this;t.$Spin.show(),t.commonUtil.ajaxPostUtil("/contract/searchContractList",{},function(e){t.$Spin.hide(),1===e.code?t.contractList=e.data.contractList:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},confirmSelect:function(){var t=this,e=this.contract;e||this.$Message.warning("您未选中任何选项");var a=this.contractArray[e].modal;this.$nextTick(function(){t.isDisabled=!1,t.isCreate=!0,t.contract=null,t.$refs[a].showModal(),t.showSelect=!1})},getAccountDetail:function(t){var e=this;e.$Spin.show(),e.commonUtil.ajaxGetUtil("/specialAccount/seatchSpecialAccountById/"+e.currentRow.id,{},function(a){e.$Spin.hide(),1===a.code?t(a.data):e.$Message.error(a.msg)},function(){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)},isShowScreen:function(t){this.isScreen=t},handleModify:function(){var t=this,e=this;if(e.isSelected){var a=s()({},e.currentRow),n=-1!==[2,3].indexOf(a.auditStatus),i=a.shouzhi_type,r=e.contractArray[i].modal;a.date=new Date(a.date),e.$nextTick(function(){e.isCreate=!1,e.isDisabled=!n,e.$refs[r].showModal(a),t.contract=null})}else e.$Message.warning("您未选择需要修改的内容")},handleDelete:function(){this.deleteData("/specialAccount/deleteSpecialAccount/","id")}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bidding"},[a("Crumbs",{attrs:{"parent-manage":"资金管理","children-manage":"专账信息"},on:{isShowScreen:t.isShowScreen}}),t._v(" "),t.isScreen?a("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[a("Form",{attrs:{model:t.searchData,"label-width":85}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"往来单位"}},[a("Select",{attrs:{transfer:"",filterable:"",clearable:""},model:{value:t.searchData.yifangId,callback:function(e){t.$set(t.searchData,"yifangId",e)},expression:"searchData.yifangId"}},t._l(t.yiFangList,function(e){return a("Option",{key:e.id,attrs:{value:parseInt(e.id)}},[t._v(t._s(e.name))])}),1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px"}},[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"日期开始时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.startTimeOptions,placeholder:"请选择日期开始时间",placement:"bottom-start"},on:{"on-change":t.startTimeChange},model:{value:t.searchData.startTime,callback:function(e){t.$set(t.searchData,"startTime",e)},expression:"searchData.startTime"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"日期结束时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.endTimeOptions,placeholder:"请选择日期结束时间",placement:"bottom-start"},on:{"on-change":t.endTimeChange},model:{value:t.searchData.endTime,callback:function(e){t.$set(t.searchData,"endTime",e)},expression:"searchData.endTime"}})],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px","text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("确认")])],1)],1)],1):t._e(),t._v(" "),a("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.showSelect=!0}}},[t._v("\n      新增\n    ")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:t.handleModify}},[t._v("\n      修改\n    ")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:t.handleDelete}},[t._v("\n      删除\n    ")]),t._v(" "),a("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(16)}}},[t._v("\n      打印\n    ")]),t._v(" "),a("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/specialAccount/exportSpecialAccountListExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),a("Table",{staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{"highlight-row":"",columns:t.columns,data:t.accountList},on:{"on-current-change":t.selectRow}}),t._v(" "),a("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}}),t._v(" "),a("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:t.showSelect,callback:function(e){t.showSelect=e},expression:"showSelect"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("请选择收支类别")]),t._v(" "),a("RadioGroup",{model:{value:t.contract,callback:function(e){t.contract=e},expression:"contract"}},t._l(t.contractArray,function(e,n){return a("Radio",{key:n,attrs:{label:n}},[t._v(t._s(e.name))])}),1),t._v(" "),a("p",{staticStyle:{"text-align":"left","padding-bottom":"30px"},attrs:{slot:"footer"},slot:"footer"},[t.isDisabled?t._e():a("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(e){t.showSelect=!1}}},[t._v("\n          取消\n        ")]),t._v(" "),t.isDisabled?t._e():a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.confirmSelect()}}},[t._v("\n          确认\n        ")])],1)],1),t._v(" "),a("income-model",{ref:"income",attrs:{"jie-or-dai":t.jieOrDai,"ke-mu-array":t.keMuArray,"is-create":t.isCreate,"is-disabled":t.isDisabled,"contract-type":t.incomeType},on:{refreshList:t.searchList}}),t._v(" "),a("pay-model",{ref:"pay",attrs:{"jie-or-dai":t.jieOrDai,"ke-mu-array":t.keMuArray,"is-create":t.isCreate,"is-disabled":t.isDisabled,"contract-type":t.payType,"contract-list":t.contractList,"yi-fang-list":t.yiFangList},on:{refreshList:t.searchList}})],1),t._v(" "),a("audit",{ref:"audit",attrs:{form:t.auditForm}})],1)},staticRenderFns:[]};var g=a("VU/8")(f,m,!1,function(t){a("1byP")},"data-v-63a1c93b",null);e.default=g.exports}});
//# sourceMappingURL=12.369ef72584db16333314.js.map