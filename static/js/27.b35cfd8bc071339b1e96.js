webpackJsonp([27],{OzOM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),o=a("J8Iu"),n=a("9c+7"),r={name:"BusinessManage",components:{uploadFile:o.a},mixins:[n.a],data:function(){var e=this;return{total:0,showTitle:!1,businessList:[],currentRow:"",isDisabled:!1,isSelected:!1,transferValue:!0,form:{orgId:"",officeName:"",officeRemark:""},ruleValidateType:{orgId:[{type:"number",required:!0,message:"请填写机构名称",trigger:"change"}],officeName:[{required:!0,message:"请选择部门名称",trigger:"change"}]},searchData:{orgId:null,officeName:"",ascending:!1,orderBy:"officeId",pageNo:1,pageSize:10},isScreen:!1,curTime:"",selTypeMod:!1,columns:[{type:"index",title:"序号",width:60,align:"center",indexMethod:function(t){var a=t._index;return e.searchData.pageSize*(e.searchData.pageNo-1)+a+1}},{title:"机构名称",key:"orgName",render:function(t,a){return t("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){e.showInfo(a.row)}}},a.row.orgName)}},{title:"部门名称",key:"officeName"}],data:[]}},mounted:function(){this.getAllList();var e=(new Date).toLocaleString("chinese",{hour12:!1});this.curTime=e.substring(0,15)},methods:{getAllList:function(){this.getOrganize(),this.getBusinessData()},pageNoChange:function(e){this.searchData.pageNo=e,this.getAllList()},pageSizeChange:function(e){this.searchData.pageSize=e,this.getAllList()},delData:function(){var e=this;e.isSelected?e.$Modal.confirm({title:"删除",content:"确认删除此数据吗？",onOk:function(){e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxDeleteUtil("/office/deleteOffice/"+e.currentRow.officeId,function(t){e.$Spin.hide(),1===t.code?(e.isSelected=!1,e.$Message.success(t.msg),e.getBusinessData()):e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)}}):e.$Message.warning("您未选择需要删除的内容")},getOrganize:function(){var e=this;e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxPostUtil("/organization/searchOrganization/list",{},function(t){e.$Spin.hide(),1===t.code&&(e.businessList=t.data.orgList)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)},getBusinessData:function(){var e=this;e.$set(e,"data",[]),e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxPostUtil("/office/searchOffice/list",e.searchData,function(t){if(e.$Spin.hide(),1===t.code){var a=t.data;e.total=a.totalCount,e.data=a.officeList}else e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e),e.commonUtil.getAuditCountApi(e)},createData:function(){this.showTitle=!1,this.isDisabled=!1,this.selTypeMod=!0,this.clearData()},clearData:function(){this.form={orgId:"",officeName:"",officeRemark:""},this.$refs.form.resetFields();var e=this.$refs.uploadFile;e&&e.clearFileItems()},selectRow:function(e){this.currentRow=e,this.isSelected=!0},modifyData:function(){var e=i()({},this.currentRow);this.clearData(),this.showTitle=!0,this.isDisabled=!1,this.isSelected?this.showData(e):this.$Message.warning("您未选择需要修改的内容")},showData:function(e){var t=this;this.form=e,this.$nextTick(function(){t.$refs.uploadFile.getFileItems()}),this.selTypeMod=!0},submitType:function(e){var t=this,a=this,s=a.form;s.fileIds=a.$refs.uploadFile.getFileIds(),this.$refs[e].validate(function(e){e?(t.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),a.showTitle?t.commonUtil.ajaxPutUtil("/office/updateOffice",s,function(e){t.$Spin.hide(),1===e.code?(t.selTypeMod=!1,t.$Message.success(e.msg),t.getBusinessData()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()}):t.commonUtil.ajaxPostUtil("/office/addOffice",s,function(e){t.$Spin.hide(),1===e.code?(t.$Message.success(e.msg),t.selTypeMod=!1,t.getBusinessData()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()})):a.$Message.error("请填写好信息")})},resetType:function(e){this.$refs[e].resetFields(),this.selTypeMod=!1},isShowScreen:function(){this.isScreen=!this.isScreen},showInfo:function(e){var t=i()({},e);this.clearData(),this.isDisabled=!0,this.showData(t)}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Breadcrumb",{staticClass:"breadcrumb"},[s("BreadcrumbItem",[s("Icon",{attrs:{type:"ios-home-outline"}}),e._v("基础设置\n    ")],1),e._v(" "),s("BreadcrumbItem",{staticClass:"curBreadcrumb"},[s("Icon",{attrs:{type:"logo-buffer"}}),e._v(" 部门设置\n    ")],1),e._v(" "),s("span",{staticClass:"screenContent"},[s("img",{staticStyle:{width:"11px","margin-right":"8px","margin-left":"10px"},attrs:{src:a("hmnq")}}),e._v("\n      "+e._s(e.curTime))]),e._v(" "),s("span",{staticClass:"screenContent"},[s("img",{staticStyle:{width:"10.5px","margin-right":"8px"},attrs:{src:a("0dlO")}}),e._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:e.isShowScreen}},[e._v("\n        筛选\n        "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1),e._v(" "),e.isScreen?s("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[s("Form",{attrs:{model:e.searchData,"label-width":62}},[s("Row",[s("Col",{attrs:{span:"6"}},[s("FormItem",{attrs:{label:"机构名称"}},[e.isDisabled?e._e():s("Select",{attrs:{clearable:"",transfer:e.transferValue,filterable:"",placeholder:"请选择机构名称"},model:{value:e.searchData.orgId,callback:function(t){e.$set(e.searchData,"orgId",t)},expression:"searchData.orgId"}},e._l(e.businessList,function(t){return s("Option",{key:t.orgId,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1)],1),e._v(" "),s("Col",{attrs:{xs:{span:11,offset:1},lg:{span:6}}},[s("FormItem",{attrs:{label:"部门名称"}},[s("Input",{attrs:{clearable:"",placeholder:"请填写部门名称"},model:{value:e.searchData.officeName,callback:function(t){e.$set(e.searchData,"officeName",t)},expression:"searchData.officeName"}})],1)],1),e._v(" "),s("Col",{staticStyle:{"text-align":"right"},attrs:{xs:{span:1},lg:{span:2,offset:1}}},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.getBusinessData()}}},[e._v("\n          确认\n        ")])],1)],1)],1)],1):e._e(),e._v(" "),s("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.createData}},[e._v("\n      新增\n    ")]),e._v(" "),s("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:e.modifyData}},[e._v("\n      修改\n    ")]),e._v(" "),s("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:e.delData}},[e._v("\n      删除\n    ")]),e._v(" "),s("Button",{attrs:{icon:"md-print"},on:{click:function(t){return t.stopPropagation(),e.printContent(2)}}},[e._v("\n      打印\n    ")]),e._v(" "),s("Button",{attrs:{icon:"md-exit"},on:{click:function(t){return e.excelExcel("/office/exportOfficeListExcel")}}},[e._v("\n      导出\n    ")]),e._v(" "),s("Table",{ref:"checkTable",staticClass:"table",attrs:{"highlight-row":"",columns:e.columns,data:e.data},on:{"on-current-change":e.selectRow}}),e._v(" "),s("Page",{staticStyle:{"text-align":"right"},attrs:{total:e.total,current:e.searchData.pageNo,"page-size":e.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":e.pageNoChange,"on-page-size-change":e.pageSizeChange}}),e._v(" "),s("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:e.selTypeMod,callback:function(t){e.selTypeMod=t},expression:"selTypeMod"}},[s("p",{attrs:{slot:"header"},slot:"header"},[e.isDisabled||e.showTitle?s("span",[e._v("部门信息")]):s("span",[e._v("请设置部门信息")])]),e._v(" "),s("Tabs",{staticClass:"innerTabStyle",attrs:{animated:!1,value:"name1"}},[s("TabPane",{attrs:{label:"信息设置",name:"name1"}},[s("Form",{ref:"form",attrs:{model:e.form,rules:e.ruleValidateType,"label-width":80}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"机构名称",prop:"orgId"}},[e.isDisabled?s("Input",{attrs:{disabled:"",placeholder:"请填写部门名称"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName","string"==typeof t?t.trim():t)},expression:"form.orgName"}}):s("Select",{attrs:{clearable:"",transfer:e.transferValue,filterable:"",placeholder:"请选择机构名称"},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.businessList,function(t){return s("Option",{key:t.orgId,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"部门名称",prop:"officeName"}},[s("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写部门名称"},model:{value:e.form.officeName,callback:function(t){e.$set(e.form,"officeName","string"==typeof t?t.trim():t)},expression:"form.officeName"}})],1)],1)],1),e._v(" "),s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"备注"}},[s("Input",{attrs:{disabled:e.isDisabled,type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"请填写备注"},model:{value:e.form.officeRemark,callback:function(t){e.$set(e.form,"officeRemark","string"==typeof t?t.trim():t)},expression:"form.officeRemark"}})],1)],1)],1)],1),e._v(" "),s("TabPane",{staticClass:"uploadStyle",attrs:{label:"附件",name:"name7"}},[s("uploadFile",{ref:"uploadFile",attrs:{"is-disabled":e.isDisabled,form:e.form}})],1)],1),e._v(" "),s("p",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{icon:"md-print"}},[e._v("\n          打印\n        ")]),e._v(" "),s("Button",{attrs:{icon:"md-exit"}},[e._v("\n          导出\n        ")]),e._v(" "),e.isDisabled?e._e():s("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(t){return e.resetType("form")}}},[e._v("\n          取消\n        ")]),e._v(" "),e.isDisabled?e._e():s("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.submitType("form")}}},[e._v("\n          确认\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,c,!1,function(e){a("ck9W")},null,null);t.default=l.exports},ck9W:function(e,t){}});
//# sourceMappingURL=27.b35cfd8bc071339b1e96.js.map