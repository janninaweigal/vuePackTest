webpackJsonp([20],{UZcf:function(e,t){},qmQS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),s=a("J8Iu"),o=a("9c+7"),r={name:"ContactManage",components:{uploadFile:s.a},mixins:[o.a],data:function(){var e=this;return{total:0,officeList:[],currentRow:{},orgList:[],showTitle:!1,isSelected:!1,isDisabled:!1,transferValue:!0,form:{officeId:null,officeName:"",linkManPhone:null,linkManEmail:"",linkManName:"",orgId:null,orgName:"",linkManRemark:""},ruleValidateType:{linkManEmail:[{required:!1,message:"电子邮箱不能为空",trigger:"change"},{type:"email",message:"请正确填写邮箱",trigger:"change"}],linkManPhone:[{required:!0,message:"电话号码不能为空",trigger:"change"}],linkManName:[{required:!0,message:"请填写姓名",trigger:"change"}],orgId:[{type:"number",required:!0,message:"请填写机构名称",trigger:"blur"}]},searchData:{orgId:"",linkManName:"",ascending:!1,orderBy:"linkManId",pageNo:1,pageSize:10},isScreen:!1,curTime:"",showContact:!1,selTypeMod:!1,columns:[{type:"index",title:"序号",width:60,align:"center",indexMethod:function(t){var a=t._index;return e.searchData.pageSize*(e.searchData.pageNo-1)+a+1}},{title:"姓名",width:80,align:"left",render:function(t,a){return t("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){e.showInfo(a.row)}}},a.row.linkManName)}},{title:"所属机构",key:"orgName"},{title:"所属部门",key:"officeName"},{title:"联系电话",key:"linkManPhone"},{title:"电子邮箱",key:"linkManEmail"}],data:[]}},mounted:function(){this.getAllList();var e=(new Date).toLocaleString("chinese",{hour12:!1});this.curTime=e.substring(0,15)},methods:{getAllList:function(){this.getBusinessData(),this.getOrganize(),this.getContactData()},pageNoChange:function(e){this.searchData.pageNo=e,this.getAllList()},pageSizeChange:function(e){this.searchData.pageSize=e,this.getAllList()},deleteData:function(){var e=this;e.isSelected?e.$Modal.confirm({title:"删除",content:"确认删除此数据吗？",onOk:function(){e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxDeleteUtil("/linkMan/deleteLinkMan/"+e.currentRow.linkManId,function(t){e.$Spin.hide(),1===t.code?(e.isSelected=!1,e.$Message.success(t.msg),e.getContactData()):e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)}}):e.$Message.warning("您未选择需要删除的内容")},getOrganize:function(){var e=this;e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxPostUtil("/organization/searchOrganization/list",{orgType:"",orgName:"",pageNo:0,pageSize:0},function(t){e.$Spin.hide(),1===t.code?e.orgList=t.data.orgList:e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)},getContactData:function(){var e=this;e.isSelected=!1,e.$set(e,"data",[]),e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxPostUtil("/linkMan/searchLinkMan/list",e.searchData,function(t){if(e.$Spin.hide(),1===t.code){var a=t.data;e.total=a.totalCount,e.data=a.linkManList}else e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e),e.commonUtil.getAuditCountApi(e)},clearFormData:function(){this.form={officeId:null,officeName:"",linkManPhone:null,linkManEmail:"",linkManName:"",orgId:null,orgName:"",linkManRemark:""},this.$refs.form.resetFields();var e=this.$refs.uploadFile;e&&e.clearFileItems()},showInfo:function(e){var t=this,a=i()({},e);this.clearFormData(),this.isDisabled=!0,this.form=a,this.$nextTick(function(){t.$refs.uploadFile.getFileItems()}),this.selTypeMod=!0},selectRow:function(e){this.currentRow=e,this.isSelected=!0},modifyData:function(){if(this.isSelected){this.clearFormData();var e=i()({},this.currentRow);this.showTitle=!0,this.isDisabled=!1,this.showData(e)}else this.$Message.warning("您未选择需要修改的内容")},showData:function(e){var t=this;this.getBusinessData(e.orgId,function(a){a&&(t.form=e),t.$nextTick(function(){t.$refs.uploadFile.getFileItems()}),t.selTypeMod=!0})},createData:function(){this.clearFormData(),this.showTitle=!1,this.isDisabled=!1,this.selTypeMod=!0},submitType:function(e){var t=this,a=t.form;a.fileIds=t.$refs.uploadFile.getFileIds(),t.$refs[e].validate(function(e){e?(t.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),t.showTitle?t.commonUtil.ajaxPutUtil("/linkMan/updateLinkMan",a,function(e){t.$Spin.hide(),1===e.code?(t.selTypeMod=!1,t.$Message.success(e.msg),t.getContactData()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t):t.commonUtil.ajaxPostUtil("/linkMan/addLinkMan",a,function(e){t.$Spin.hide(),1===e.code?(t.selTypeMod=!1,t.$Message.success(e.msg),t.getContactData()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t),t.currentRow={}):t.$Message.error("请填写好信息")})},resetType:function(e){this.$refs[e].resetFields(),this.selTypeMod=!1},isShowScreen:function(){this.isScreen=!this.isScreen},ok:function(){},getBusinessData:function(e,t){var a=this;this.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}});var n=e||null;n&&!t&&(this.form.officeId=null),this.commonUtil.ajaxPostUtil("/office/searchOffice/list",{orgId:n,officeName:"",pageNo:0,pageSize:0},function(e){a.$Spin.hide(),1===e.code?(a.officeList=e.data.officeList,t&&t(!0)):(a.$Message.error(e.data),t&&t(!1))},function(e){t&&t(!1),a.$Message.error("网络连接错误"),a.$Spin.hide()},this)}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Breadcrumb",{staticClass:"breadcrumb"},[n("BreadcrumbItem",[n("Icon",{attrs:{type:"ios-home-outline"}}),e._v("基础设置\n    ")],1),e._v(" "),n("BreadcrumbItem",{staticClass:"curBreadcrumb"},[n("Icon",{attrs:{type:"logo-buffer"}}),e._v("人员设置\n    ")],1),e._v(" "),n("span",{staticClass:"screenContent"},[n("img",{staticStyle:{width:"11px","margin-right":"8px","margin-left":"10px"},attrs:{src:a("hmnq")}}),e._v("\n      "+e._s(e.curTime))]),e._v(" "),n("span",{staticClass:"screenContent"},[n("img",{staticStyle:{width:"10.5px","margin-right":"8px"},attrs:{src:a("0dlO")}}),e._v(" "),n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.isShowScreen}},[e._v("\n        筛选\n        "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1),e._v(" "),e.isScreen?n("Content",{staticClass:"content isScreen",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[n("Form",{attrs:{model:e.searchData,"label-width":62}},[n("Row",[n("Col",{attrs:{xs:{span:5},lg:{span:6}}},[n("FormItem",{attrs:{label:"所属机构"}},[n("Select",{attrs:{clearable:"",transfer:e.transferValue,filterable:"",placeholder:"请选择所属机构"},model:{value:e.searchData.orgId,callback:function(t){e.$set(e.searchData,"orgId",t)},expression:"searchData.orgId"}},e._l(e.orgList,function(t){return n("Option",{key:t.orgId,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1)],1),e._v(" "),n("Col",{attrs:{xs:{span:11,offset:1},lg:{span:6}}},[n("FormItem",{attrs:{label:"姓名"}},[n("Input",{attrs:{placeholder:"请填写姓名"},model:{value:e.searchData.linkManName,callback:function(t){e.$set(e.searchData,"linkManName",t)},expression:"searchData.linkManName"}})],1)],1),e._v(" "),n("Col",{staticStyle:{"text-align":"right"},attrs:{xs:{span:1},lg:{span:2,offset:1}}},[n("Button",{attrs:{type:"primary"},on:{click:e.getContactData}},[e._v("\n          确认\n        ")])],1)],1)],1)],1):e._e(),e._v(" "),n("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.createData}},[e._v("\n      新增\n    ")]),e._v(" "),n("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:e.modifyData}},[e._v("\n      修改\n    ")]),e._v(" "),n("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:e.deleteData}},[e._v("\n      删除\n    ")]),e._v(" "),n("Button",{attrs:{icon:"md-print"},on:{click:function(t){return t.stopPropagation(),e.printContent(4)}}},[e._v("\n      打印\n    ")]),e._v(" "),n("Button",{attrs:{icon:"md-exit"},on:{click:function(t){return e.excelExcel("/linkMan/exportLinkmanListExcel")}}},[e._v("\n      导出\n    ")]),e._v(" "),n("Table",{ref:"checkTable",staticClass:"table",attrs:{"highlight-row":"",columns:e.columns,data:e.data},on:{"on-current-change":e.selectRow}}),e._v(" "),n("Page",{staticStyle:{"text-align":"right"},attrs:{total:e.total,current:e.searchData.pageNo,"page-size":e.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":e.pageNoChange,"on-page-size-change":e.pageSizeChange}}),e._v(" "),n("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:e.selTypeMod,callback:function(t){e.selTypeMod=t},expression:"selTypeMod"}},[n("p",{attrs:{slot:"header"},slot:"header"},[e.isDisabled||e.showTitle?n("span",[e._v("联系人信息")]):n("span",[e._v("请设置联系人信息")])]),e._v(" "),n("Tabs",{staticClass:"innerTabStyle",attrs:{animated:!1,value:"name1"}},[n("TabPane",{attrs:{label:"信息设置",name:"name1"}},[n("Form",{ref:"form",attrs:{model:e.form,rules:e.ruleValidateType,"label-width":80}},[n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"姓名",prop:"linkManName"}},[n("Input",{attrs:{disabled:e.isDisabled,placeholder:"请填写姓名"},model:{value:e.form.linkManName,callback:function(t){e.$set(e.form,"linkManName","string"==typeof t?t.trim():t)},expression:"form.linkManName"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"所属机构",prop:"orgId"}},[e.isDisabled?n("Input",{attrs:{disabled:"",placeholder:"请选择所属机构"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName","string"==typeof t?t.trim():t)},expression:"form.orgName"}}):n("Select",{attrs:{clearable:"",transfer:e.transferValue,filterable:"",placeholder:"请选择所属机构"},on:{"on-change":e.getBusinessData},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}},e._l(e.orgList,function(t){return n("Option",{key:t.orgId,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1)],1)],1),e._v(" "),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"所属部门",prop:"officeId"}},[e.isDisabled?n("Input",{attrs:{disabled:"",placeholder:"请填写部门名称"},model:{value:e.form.officeName,callback:function(t){e.$set(e.form,"officeName","string"==typeof t?t.trim():t)},expression:"form.officeName"}}):n("Select",{attrs:{clearable:"",transfer:e.transferValue,filterable:"",placeholder:"请选择所属部门"},model:{value:e.form.officeId,callback:function(t){e.$set(e.form,"officeId",t)},expression:"form.officeId"}},e._l(e.officeList,function(t){return n("Option",{key:t.officeId,attrs:{value:t.officeId}},[e._v(e._s(t.officeName))])}),1)],1)],1),e._v(" "),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"联系电话",prop:"linkManPhone"}},[n("Input",{attrs:{disabled:e.isDisabled,placeholder:"请填写电话"},model:{value:e.form.linkManPhone,callback:function(t){e.$set(e.form,"linkManPhone","string"==typeof t?t.trim():t)},expression:"form.linkManPhone"}})],1)],1)],1),e._v(" "),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"电子邮箱",prop:"linkManEmail"}},[n("Input",{attrs:{disabled:e.isDisabled,placeholder:"请填写电子邮箱"},model:{value:e.form.linkManEmail,callback:function(t){e.$set(e.form,"linkManEmail","string"==typeof t?t.trim():t)},expression:"form.linkManEmail"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:"备注"}},[n("Input",{attrs:{disabled:e.isDisabled,type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"请填写备注"},model:{value:e.form.linkManRemark,callback:function(t){e.$set(e.form,"linkManRemark","string"==typeof t?t.trim():t)},expression:"form.linkManRemark"}})],1)],1)],1)],1)],1),e._v(" "),n("TabPane",{staticClass:"uploadStyle",attrs:{label:"附件",name:"name2"}},[n("uploadFile",{ref:"uploadFile",attrs:{"is-disabled":e.isDisabled,form:e.form}})],1)],1),e._v(" "),n("p",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{icon:"md-print"}},[e._v("\n          打印\n        ")]),e._v(" "),n("Button",{attrs:{icon:"md-exit"}},[e._v("\n          导出\n        ")]),e._v(" "),e.isDisabled?e._e():n("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(t){return e.resetType("form")}}},[e._v("\n          取消\n        ")]),e._v(" "),e.isDisabled?e._e():n("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.submitType("form")}}},[e._v("\n          确认\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(e){a("UZcf")},"data-v-40e6a562",null);t.default=c.exports}});
//# sourceMappingURL=20.bf0baba36b65ce66a41e.js.map