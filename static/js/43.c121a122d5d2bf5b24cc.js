webpackJsonp([43],{XmYf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),s=a("P0nn"),r=a("9c+7"),o={name:"BudgetManage",components:{investSummary:s.a},mixins:[r.a],data:function(){var t=this;return{subentryTypes:"",popUpSearchData:{auditBatchType:null,projectId:null,adminId:null,auditStatus:null,auditBatchId:null},orgList:[],officeList:[],capitalList:[],searchData:{capitalId:null,chendanOrgId:null,manageOrgId:null,officeId:null,projectName:"",auditStatus:1,auditBatchType:"AUDIT_INVESTMENT_SUMMARY",ascending:!1,orderBy:"projectId",pageNo:1,pageSize:10},isScreen:!1,curTime:"",columns:[{type:"index",title:"序号",width:60,align:"center"},{title:"项目名称",render:function(e,a){var n=a.row;return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){t.showInfo(n)}}},n.projectName)}},{title:"合同类别",key:"contractType",render:function(e,a){return e("div",t.contractTypeList[a.row.contractType].name)}},{title:"合同名称",key:"contractName",render:function(e,a){var n=a.row;return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){var e=i()({},n),a=t.contractTypeList[e.contractType].modal;t.contractId=e.contractId,t.$nextTick(function(){t.isDisabled=!0,t.$refs[a].showModal(e.contractType)})}}},n.contractName)}},{title:"乙方信息",key:"yifangName"},{title:"合同金额",key:"sumMoney"},{title:"签订日期",key:"signDate",render:function(e,a){return e("div",t.$moment(a.row.signDate).format("YYYY年MM月DD日"))}}],investmentList:[],total:0}},mounted:function(){this.getFundData(),this.getOfficeList(),this.getOrganizeData(),this.getInvestmentData();var t=(new Date).toLocaleString("chinese",{hour12:!1});this.curTime=t.substring(0,15)},methods:{pageNoChange:function(t){this.searchData.pageNo=t,this.getInvestmentData()},pageSizeChange:function(t){this.searchData.pageSize=t,this.getInvestmentData()},getFundData:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxPostUtil("/capital/searchCapital/list",{},function(e){t.$Spin.hide(),1===e.code?t.capitalList=e.data.capitalList:t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},isShowScreen:function(){this.isScreen=!this.isScreen},showInfo:function(t){var e=this,a=t.auditBatchType;this.popUpSearchData={auditBatchType:a,projectId:t.projectId,adminId:t.adminId,auditStatus:t.auditStatus,auditBatchId:t.auditBatchId},this.subentryTypes=t.subentryTypes,this.allFinancial=t.allFinancial,this.$nextTick(function(){e.$refs.investSummary.search()})},getInvestmentData:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxPostUtil("/statistics/investment/list",t.searchData,function(e){if(t.$Spin.hide(),1===e.code){var a=e.data;t.investmentList=a.investmentList,t.total=a.total}else t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t),t.commonUtil.getAuditCountApi(t)},getOrganizeData:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxPostUtil("/organization/searchOrganization/list",{},function(e){t.$Spin.hide(),1===e.code?t.orgList=e.data.orgList:t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},getOfficeList:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxPostUtil("/office/searchOffice/list",{orgId:null,officeName:""},function(e){t.$Spin.hide(),1===e.code?t.officeList=e.data.officeList:t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Breadcrumb",{staticClass:"breadcrumb"},[n("BreadcrumbItem",[n("Icon",{attrs:{type:"ios-home-outline"}}),t._v("查询统计\n    ")],1),t._v(" "),n("BreadcrumbItem",{staticClass:"curBreadcrumb"},[n("Icon",{attrs:{type:"logo-buffer"}}),t._v(" 合同统计\n    ")],1),t._v(" "),n("span",{staticClass:"screenContent"},[n("img",{staticStyle:{width:"11px","margin-right":"8px","margin-left":"10px"},attrs:{src:a("hmnq")}}),t._v("\n      "+t._s(t.curTime))]),t._v(" "),n("span",{staticClass:"screenContent"},[n("img",{staticStyle:{width:"10.5px","margin-right":"8px"},attrs:{src:a("0dlO")}}),t._v(" "),n("a",{attrs:{href:"javascript:void(0)"},on:{click:t.isShowScreen}},[t._v("\n        筛选\n        "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1),t._v(" "),t.isScreen?n("Content",{staticClass:"content screenSt",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[n("Form",{attrs:{model:t.searchData,"label-width":62}},[n("Row",[n("Col",{attrs:{xs:{span:5},lg:{span:21}}},[n("FormItem",{attrs:{label:"项目名称"}},[n("Input",{attrs:{clearable:"",placeholder:"请填写项目名称"},model:{value:t.searchData.projectName,callback:function(e){t.$set(t.searchData,"projectName",e)},expression:"searchData.projectName"}})],1)],1)],1),t._v(" "),n("Row",{staticStyle:{"margin-top":"15px"}},[n("Col",{attrs:{xs:{span:5},lg:{span:10}}},[n("FormItem",{attrs:{label:"主管单位"}},[n("Select",{attrs:{clearable:"",filterable:""},model:{value:t.searchData.manageOrgId,callback:function(e){t.$set(t.searchData,"manageOrgId",e)},expression:"searchData.manageOrgId"}},t._l(t.orgList,function(e){return n("Option",{key:e.orgId,attrs:{value:e.orgId}},[t._v(t._s(e.orgName))])}),1)],1)],1),t._v(" "),n("Col",{attrs:{xs:{span:11,offset:1},lg:{span:10}}},[n("FormItem",{attrs:{label:"承担单位"}},[n("Select",{attrs:{clearable:"",filterable:""},model:{value:t.searchData.chendanOrgId,callback:function(e){t.$set(t.searchData,"chendanOrgId",e)},expression:"searchData.chendanOrgId"}},t._l(t.orgList,function(e){return n("Option",{key:e.orgId,attrs:{value:e.orgId}},[t._v(t._s(e.orgName))])}),1)],1)],1),t._v(" "),n("Col",{staticStyle:{"text-align":"right"},attrs:{xs:{span:1,offset:1},lg:{span:1,offset:1}}})],1),t._v(" "),n("Row",{staticStyle:{"margin-top":"15px"}},[n("Col",{attrs:{xs:{span:5},lg:{span:10}}},[n("FormItem",{attrs:{label:"合同名称"}},[n("Select",{attrs:{clearable:"",filterable:""},model:{value:t.searchData.officeId,callback:function(e){t.$set(t.searchData,"officeId",e)},expression:"searchData.officeId"}},t._l(t.officeList,function(e){return n("Option",{key:e.officeId,attrs:{value:e.officeId}},[t._v(t._s(e.officeName))])}),1)],1)],1),t._v(" "),n("Col",{attrs:{xs:{span:11,offset:1},lg:{span:10}}},[n("FormItem",{attrs:{label:"资金类别"}},[n("Select",{attrs:{clearable:"",filterable:""},model:{value:t.searchData.capitalId,callback:function(e){t.$set(t.searchData,"capitalId",e)},expression:"searchData.capitalId"}},t._l(t.capitalList,function(e){return n("Option",{key:e.capitalId,attrs:{value:e.capitalId}},[t._v(t._s(e.capitalName))])}),1)],1)],1),t._v(" "),n("Col",{staticStyle:{float:"right"},attrs:{xs:{span:1,offset:1},lg:{span:1,offset:1}}},[n("Button",{attrs:{clearable:"",type:"primary"},on:{click:function(e){return t.getInvestmentData()}}},[t._v("\n          确认\n        ")])],1)],1)],1)],1):t._e(),t._v(" "),n("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[n("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(13)}}},[t._v("\n      打印\n    ")]),t._v(" "),n("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/statistics/exportInvestmentSummaryExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),n("Table",{ref:"checkTable",staticClass:"table",attrs:{"highlight-row":"",columns:t.columns,data:t.investmentList}}),t._v(" "),n("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}}),t._v(" "),n("investSummary",{ref:"investSummary",attrs:{"search-data":t.popUpSearchData,"subentry-types":t.subentryTypes}})],1)],1)},staticRenderFns:[]},l=a("VU/8")(o,c,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=43.c121a122d5d2bf5b24cc.js.map