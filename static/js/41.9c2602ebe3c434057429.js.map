{"version":3,"sources":["webpack:///src/phaseOne/formModel.vue","webpack:///./src/phaseOne/formModel.vue?2a86","webpack:///./src/phaseOne/formModel.vue"],"names":["formModel","name","components","uploadFile","data","_this","this","formTitle","transferValue","form","formName","formType","capitalId","formSource","formRemark","typeList","0","label","1","2","3","4","5","curTime","popUp","columns","title","key","width","render","h","params","style","color","cursor","on","click","showInfo","row","props","type","fontSize","marginRight","getContentByFileids","fileids","capitalName","className","capitalList","formList","searchData","ascending","orderBy","mounted","time","Date","toLocaleString","hour12","substring","getCapitalList","getFormList","methods","onPreview","commonUtil","onlinePreview","$Message","error","downloadFile","that","$Spin","show","downFile","fileId","res","hide","savePdf","findData","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","value","indexOf","err","return","flag","fileItems","class","size","ajaxGetUtil","code","pdfData","id","docData","msg","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","evt","createEvent","initEvent","dispatchEvent","removeChild","ajaxPostUtil","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","i","formTypeName","getAuditCountApi","currentRow","listData","assign_default","isDisabled","showData","_this2","$nextTick","$refs","getFileItems","selectTemplate","parseInt","replace","phaseOne_formModel","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","staticStyle","margin-right","margin-left","src","__webpack_require__","_s","span","padding","minHeight","background","orientation","padding-left","show-ink","offset-top","on-select","_l","mask-closable","model","callback","$$v","expression","slot","label-width","prop","disabled","transfer","filterable","clearable","placeholder","$set","autosize","minRows","maxRows","ref","is-disabled","is-pdf","text-align","icon","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/41.9c2602ebe3c434057429.js","sourcesContent":["<template>\n  <div>\n    <!---->\n    <Breadcrumb class=\"breadcrumb\">\n      <BreadcrumbItem>\n        <Icon type=\"ios-home-outline\"></Icon>表单模板\n      </BreadcrumbItem>\n      <BreadcrumbItem class=\"curBreadcrumb\">\n        <Icon type=\"logo-buffer\"></Icon> 表单模板\n      </BreadcrumbItem>\n      <span class=\"screenContent\">\n        <img\n          style=\"width: 11px;margin-right: 8px;margin-left: 10px;\"\n          src=\"../assets/day.png\"\n        >\n        {{ curTime }}</span>\n    </Breadcrumb>\n    <Col\n      class=\"modelTable\"\n      span=\"21\"\n    >\n    <Content\n      class=\"content\"\n      :style=\"{padding: '14px 24px', minHeight: '220px', background: '#fff'}\"\n    >\n      <Divider orientation=\"left\">{{ formTitle }}</Divider>\n      <Table\n        class=\"table\"\n        :columns=\"columns\"\n        :data=\"formList\"\n      >\n      </Table>\n    </Content>\n    </Col>\n    <!--锚点-->\n    <Col\n      span=\"3\"\n      style=\"padding-left: 5%;\"\n    >\n    <Anchor show-ink :offset-top=\"8\" @on-select=\"selectTemplate\">\n      <AnchorLink\n        v-for=\"(item,key) in typeList\"\n        :id=\"'link'+key\"\n        :key=\"key\"\n        :href=\"'#link'+key\"\n        :title=\"item.name\"\n      />\n    </Anchor>\n    </Col>\n    <!--详情弹出框-->\n    <Modal\n      v-model=\"popUp\"\n      class=\"selStyle specialWidth\"\n      :mask-closable=\"false\"\n    >\n      <p slot=\"header\">\n        <span>表单信息</span>\n      </p>\n      <Tabs\n        class=\"innerTabStyle\"\n        value=\"name1\"\n      >\n        <TabPane\n          label=\"信息设置\"\n          name=\"name1\"\n        >\n          <Form\n            :model=\"form\"\n            :label-width=\"80\"\n          >\n            <Row>\n              <Col span=\"12\">\n              <FormItem\n                label=\"表单类型\"\n                prop=\"formType\"\n              >\n                <Select\n                  v-model=\"form.formType\"\n                  disabled\n                  :transfer=\"transferValue\"\n                  filterable\n                  clearable\n                  placeholder=\"请选择表单类型\"\n                >\n                  <Option\n                    v-for=\"(item,key) in typeList\"\n                    :key=\"key\"\n                    :value=\"parseInt(key)\"\n                  >{{ item.label }}</Option>\n                </Select>\n              </FormItem>\n              </Col>\n              <Col\n                span=\"12\"\n              >\n              <FormItem\n                label=\"资金类别\"\n                prop=\"capitalId\"\n              >\n                <Select\n                  v-model=\"form.capitalId\"\n                  disabled\n                  :transfer=\"transferValue\"\n                  clearable\n                  filterable\n                  placeholder=\"请选择资金类别\"\n                >\n                  <Option\n                    v-for=\"item in capitalList\"\n                    :key=\"item.capitalId\"\n                    :value=\"item.capitalId\"\n                  >{{ item.capitalName }}</Option>\n                </Select>\n              </FormItem>\n              </Col>\n            </Row>\n            <Col span=\"12\">\n            <FormItem\n              label=\"表单名称\"\n              prop=\"formName\"\n            >\n              <Input\n                v-model=\"form.formName\"\n                disabled\n                placeholder=\"请填写表单名称\"\n              ></Input>\n            </FormItem>\n            </Col>\n            <Col span=\"12\">\n            <FormItem\n              label=\"表单来源\"\n              prop=\"formSource\"\n            >\n              <Input\n                v-model=\"form.formSource\"\n                disabled\n                placeholder=\"请填写表单来源\"\n              ></Input>\n            </FormItem>\n            </Col>\n            <Col span=\"24\">\n            <FormItem label=\"使用说明\">\n              <Input\n                v-model=\"form.formRemark\"\n                disabled\n                type=\"textarea\"\n                :autosize=\"{minRows: 1,maxRows: 5}\"\n                placeholder=\"请填写使用说明\"\n              ></Input>\n            </FormItem>\n            </Col>\n          </Form>\n        </TabPane>\n        <TabPane\n          label=\"附件\"\n          name=\"name2\"\n        >\n          <uploadFile ref=\"uploadFile\" is-disabled :form=\"form\" :is-pdf=\"false\" />\n        </TabPane>\n      </Tabs>\n      <p slot=\"footer\" style=\"text-align:left\">\n        <Button\n          icon=\"md-print\"\n        >\n          打印\n        </Button>\n        <Button\n          icon=\"md-exit\"\n        >\n          导出\n        </Button>\n      </p>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport uploadFile from '@/components/fileUpload.vue'\nexport default {\n  name: 'BudgetManage',\n  components: {\n    uploadFile\n  },\n  data() {\n    return {\n      formTitle: '工程合同资料',\n      transferValue: true,\n      form: {\n        formName: '',\n        formType: null,\n        capitalId: null,\n        formSource: '',\n        formRemark: ''\n      },\n      typeList: {\n        0: {\n          name: '工程合同资料',\n          label: '工程合同模板'\n        },\n        1: {\n          name: '申报资料',\n          label: '申报类模板'\n        },\n        2: {\n          name: '检查资料',\n          label: '检查类模板'\n        },\n        3: {\n          name: '验收资料',\n          label: '验收类模板'\n        },\n        4: {\n          name: '前期资料',\n          label: '前期类模板'\n        },\n        5: {\n          name: '实施资料',\n          label: '实施类模板'\n        }\n      },\n      curTime: '',\n      popUp: false,\n      columns: [\n        {\n          title: '表单来源',\n          key: 'formType',\n          width: 100,\n          render: (h, params) => {\n            return h('span', {\n              style: {\n                color: '#2d8cf0',\n                cursor: 'pointer'\n              },\n              on: {\n                click: () => {\n                  this.showInfo(params.row)\n                }\n              }\n            }, params.row.formSource);\n          }\n        },\n        {\n          title: '资金类别',\n          key: 'capitalName',\n          render: (h, params) => {\n            const row = params.row\n            return h('div', [\n              h('Icon', {\n                props: {\n                  type: 'md-globe'\n                },\n                style: {\n                  fontSize: '18px',\n                  color: '#559DF9',\n                  marginRight: '10px',\n                  cursor: 'pointer'\n                },\n                on: {\n                  click: () => {\n                    this.getContentByFileids(row.fileids, true)\n                  }\n                }\n              }),\n              h('span', {\n                style: {\n                  color: '#559DF9',\n                  cursor: 'pointer'\n                },\n                on: {\n                  click: () => {\n                    this.getContentByFileids(row.fileids, true)\n                  }\n                }\n              }, row.capitalName)\n            ]);\n          }\n        },\n        {\n          className: 'noPaddingRight',\n          title: '操作',\n          key: 'action',\n          width: 70,\n          render: (h, params) => {\n            const row = params.row\n            return h('div', [\n              h('Icon', {\n                props: {\n                  type: 'md-download'\n                },\n                style: {\n                  fontSize: '18px',\n                  color: '#559DF9',\n                  cursor: 'pointer'\n                },\n                on: {\n                  click: () => {\n                    this.getContentByFileids(row.fileids, false)\n                  }\n                }\n              })\n            ]);\n          }\n        }\n      ],\n      // 资金类别的数据\n      capitalList: [],\n      formList: [],\n      searchData: {\n        formType: 0,\n        ascending: false,\n        orderBy: 'form_id'\n      }\n    }\n  },\n  mounted() {\n    var myDate = new Date();\n    const time = myDate.toLocaleString('chinese', { hour12: false });\n    this.curTime = time.substring(0, 15)\n    // 获取数据\n    this.getCapitalList()\n    this.getFormList();\n  },\n  methods: {\n    // 预览\n    onPreview(fileids, name) {\n      if (fileids) {\n        this.commonUtil.onlinePreview(fileids, name)\n      } else {\n        this.$Message.error('还未上传文件');\n      }\n    },\n    // 下载文件\n    downloadFile(fileids, name) {\n      const that = this;\n      if (fileids) {\n        that.$Spin.show();\n        that.commonUtil.downFile('/file/download', { fileId: fileids }, (res) => {\n        // 关闭数据加载\n          that.$Spin.hide();\n          that.savePdf(name, res)\n        }, (error) => {\n          that.$Message.error('网络连接错误');\n          // 关闭数据加载\n          that.$Spin.hide();\n        }, that)\n      } else {\n        that.$Message.error('下载失败');\n      }\n    },\n    // 通过数据查找出pdf或者word数据\n    findData(data, type) {\n      for (const item of data) {\n        if (item.name.indexOf(type) !== -1) {\n          return item;\n        }\n      }\n      return null;\n    },\n    // 通过fileIds 获取内容\n    getContentByFileids(fileids, flag) {\n      const that = this;\n      that.fileItems = []\n      if (fileids) {\n        that.$Spin.show({\n          render: (h) => {\n            return h('div', [\n              h('Icon', {\n                'class': 'demo-spin-icon-load',\n                props: {\n                  type: 'ios-loading',\n                  size: 18\n                }\n              }),\n              h('div', '加载中')\n            ])\n          }\n        });\n        that.commonUtil.ajaxGetUtil('/file/searchFileInfoByIds/' + fileids, {}, (res) => {\n        // 关闭数据加载\n          that.$Spin.hide();\n          if (res.code === 1) {\n            const data = res.data\n            if (flag) {\n              // pdf 预览\n              const pdfData = that.findData(data, 'pdf')\n              if (pdfData === null) that.$Message.error('暂无上传pdf文件可以预览!');\n              that.onPreview(pdfData.id, pdfData.name)\n            } else {\n              // word 下载\n              const docData = that.findData(data, 'doc')\n              if (docData === null) that.$Message.error('暂无上传doc文件可以下载!');\n              that.downloadFile(docData.id, docData.name)\n            }\n          } else {\n            that.$Message.error(res.msg);\n          }\n        }, (error) => {\n          that.$Message.error('网络连接错误');\n          that.$Spin.hide();\n        }, that)\n      } else {\n        that.$Message.error('暂无文件上传');\n      }\n    },\n    savePdf(name, res) {\n      const blob = new Blob([res]);\n      const link = document.createElement('a');\n      link.href = window.URL.createObjectURL(blob);\n      link.download = name\n      // 此写法兼容可火狐浏览器\n      document.body.appendChild(link);\n      const evt = document.createEvent('MouseEvents');\n      evt.initEvent('click', false, false);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);// 下载完成移除元素\n    },\n    // 搜索表单列表\n    getFormList() {\n      const that = this;\n      that.$Spin.show({\n        render: (h) => {\n          return h('div', [\n            h('Icon', {\n              'class': 'demo-spin-icon-load',\n              props: {\n                type: 'ios-loading',\n                size: 18\n              }\n            }),\n            h('div', '加载中')\n          ])\n        }\n      });\n      that.commonUtil.ajaxPostUtil('/form/searchForm/list', that.searchData, (res) => {\n        // 关闭数据加载\n        that.$Spin.hide();\n        if (res.code === 1) {\n          const data = res.data\n          const typeList = that.typeList\n          for (const i of data.formList) {\n            i.formTypeName = typeList[i.formType] ? typeList[i.formType].label : ''\n          }\n          that.formList = data.formList\n          // that.total = data.totalCount\n        } else {\n          that.$Message.error(res.msg);\n        }\n      }, (error) => {\n        that.$Message.error('网络连接错误');\n        // 关闭数据加载\n        that.$Spin.hide();\n      }, that)\n      that.commonUtil.getAuditCountApi(that)\n      that.currentRow = {}\n    },\n    // 获取资金类别的数据\n    getCapitalList() {\n      const that = this;\n      that.$Spin.show();\n      that.commonUtil.ajaxPostUtil('/capital/searchCapital/list', { capitalName: '' }, (res) => {\n        // 关闭数据加载\n        that.$Spin.hide();\n        if (res.code === 1) {\n          const listData = res.data\n          that.capitalList = listData.capitalList\n        } else {\n          that.$Message.error(res.msg);\n        }\n      }, (error) => {\n        that.$Message.error('网络连接错误');\n        // 关闭数据加载\n        that.$Spin.hide();\n      }, that)\n    },\n    // 打开详情弹出来\n    showInfo(row) {\n      const data = Object.assign({}, row)\n      this.isDisabled = true;\n      this.showData(data)\n    },\n    showData(data) {\n      this.form = data\n      this.$nextTick(() => {\n        this.$refs.uploadFile.getFileItems()\n      })\n      this.popUp = true\n    },\n    // 选择右边模板\n    selectTemplate(href) {\n      const type = parseInt(href.replace(/[^0-9]/ig, ''));\n      this.formTitle = this.typeList[type].name\n      this.searchData.formType = type\n      this.getFormList();\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/phaseOne/formModel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',{staticClass:\"breadcrumb\"},[_c('BreadcrumbItem',[_c('Icon',{attrs:{\"type\":\"ios-home-outline\"}}),_vm._v(\"表单模板\\n    \")],1),_vm._v(\" \"),_c('BreadcrumbItem',{staticClass:\"curBreadcrumb\"},[_c('Icon',{attrs:{\"type\":\"logo-buffer\"}}),_vm._v(\" 表单模板\\n    \")],1),_vm._v(\" \"),_c('span',{staticClass:\"screenContent\"},[_c('img',{staticStyle:{\"width\":\"11px\",\"margin-right\":\"8px\",\"margin-left\":\"10px\"},attrs:{\"src\":require(\"../assets/day.png\")}}),_vm._v(\"\\n      \"+_vm._s(_vm.curTime))])],1),_vm._v(\" \"),_c('Col',{staticClass:\"modelTable\",attrs:{\"span\":\"21\"}},[_c('Content',{staticClass:\"content\",style:({padding: '14px 24px', minHeight: '220px', background: '#fff'})},[_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(_vm._s(_vm.formTitle))]),_vm._v(\" \"),_c('Table',{staticClass:\"table\",attrs:{\"columns\":_vm.columns,\"data\":_vm.formList}})],1)],1),_vm._v(\" \"),_c('Col',{staticStyle:{\"padding-left\":\"5%\"},attrs:{\"span\":\"3\"}},[_c('Anchor',{attrs:{\"show-ink\":\"\",\"offset-top\":8},on:{\"on-select\":_vm.selectTemplate}},_vm._l((_vm.typeList),function(item,key){return _c('AnchorLink',{key:key,attrs:{\"id\":'link'+key,\"href\":'#link'+key,\"title\":item.name}})}),1)],1),_vm._v(\" \"),_c('Modal',{staticClass:\"selStyle specialWidth\",attrs:{\"mask-closable\":false},model:{value:(_vm.popUp),callback:function ($$v) {_vm.popUp=$$v},expression:\"popUp\"}},[_c('p',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"表单信息\")])]),_vm._v(\" \"),_c('Tabs',{staticClass:\"innerTabStyle\",attrs:{\"value\":\"name1\"}},[_c('TabPane',{attrs:{\"label\":\"信息设置\",\"name\":\"name1\"}},[_c('Form',{attrs:{\"model\":_vm.form,\"label-width\":80}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"表单类型\",\"prop\":\"formType\"}},[_c('Select',{attrs:{\"disabled\":\"\",\"transfer\":_vm.transferValue,\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择表单类型\"},model:{value:(_vm.form.formType),callback:function ($$v) {_vm.$set(_vm.form, \"formType\", $$v)},expression:\"form.formType\"}},_vm._l((_vm.typeList),function(item,key){return _c('Option',{key:key,attrs:{\"value\":parseInt(key)}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"资金类别\",\"prop\":\"capitalId\"}},[_c('Select',{attrs:{\"disabled\":\"\",\"transfer\":_vm.transferValue,\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择资金类别\"},model:{value:(_vm.form.capitalId),callback:function ($$v) {_vm.$set(_vm.form, \"capitalId\", $$v)},expression:\"form.capitalId\"}},_vm._l((_vm.capitalList),function(item){return _c('Option',{key:item.capitalId,attrs:{\"value\":item.capitalId}},[_vm._v(_vm._s(item.capitalName))])}),1)],1)],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"表单名称\",\"prop\":\"formName\"}},[_c('Input',{attrs:{\"disabled\":\"\",\"placeholder\":\"请填写表单名称\"},model:{value:(_vm.form.formName),callback:function ($$v) {_vm.$set(_vm.form, \"formName\", $$v)},expression:\"form.formName\"}})],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"表单来源\",\"prop\":\"formSource\"}},[_c('Input',{attrs:{\"disabled\":\"\",\"placeholder\":\"请填写表单来源\"},model:{value:(_vm.form.formSource),callback:function ($$v) {_vm.$set(_vm.form, \"formSource\", $$v)},expression:\"form.formSource\"}})],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"24\"}},[_c('FormItem',{attrs:{\"label\":\"使用说明\"}},[_c('Input',{attrs:{\"disabled\":\"\",\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 5},\"placeholder\":\"请填写使用说明\"},model:{value:(_vm.form.formRemark),callback:function ($$v) {_vm.$set(_vm.form, \"formRemark\", $$v)},expression:\"form.formRemark\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"附件\",\"name\":\"name2\"}},[_c('uploadFile',{ref:\"uploadFile\",attrs:{\"is-disabled\":\"\",\"form\":_vm.form,\"is-pdf\":false}})],1)],1),_vm._v(\" \"),_c('p',{staticStyle:{\"text-align\":\"left\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"icon\":\"md-print\"}},[_vm._v(\"\\n        打印\\n      \")]),_vm._v(\" \"),_c('Button',{attrs:{\"icon\":\"md-exit\"}},[_vm._v(\"\\n        导出\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-31ec04b2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/phaseOne/formModel.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./formModel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./formModel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31ec04b2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./formModel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/phaseOne/formModel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}