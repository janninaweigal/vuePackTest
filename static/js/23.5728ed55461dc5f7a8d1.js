webpackJsonp([23],{UlNG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),r=a("QeYY"),s=a("SuqQ"),o=a("a5i8"),c=a("CyoZ"),l=a("94jl"),d=a("7s5I"),u={name:"Accountinfo",components:{Crumbs:r.a,constructionModel:s.a,setUpModel:o.a,entrustModel:c.a,audit:d.a},mixins:[l.a],data:function(){var t=this;return{contractId:null,signGist:{1:"比选",2:"招标",3:"其他"},budgetGist:{},contractAttr:{1:"新签合同",2:"补充合同"},showSelect:!1,contractModal:null,isScreen:!1,contractTypeList:{1:{modal:"constructionModel",name:"建设工程施工合同"},2:{modal:"setUpModel",name:"设备购置合同"},3:{modal:"entrustModel",name:"委托业务合同"}},searchData:{contractType:"",startTime:null,endTime:null,yifangId:null,ascending:!1,orderBy:"",pageNo:1,pageSize:10},contractList:[],selTypeMod:!1,transferValue:!0,listUrl:"/contract/searchContractList",yifangList:[],columns:[{type:"index",title:"序号",width:60,align:"center",fixed:"left",indexMethod:this.indexMethod},{title:"合同类别",key:"contractType",render:function(e,a){return e("div",t.contractTypeList[a.row.contractType].name)}},{title:"合同名称",key:"contractName",render:function(e,a){var n=a.row;return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){var e=i()({},n),a=t.contractTypeList[e.contractType].modal;t.contractId=e.contractId,t.$nextTick(function(){t.isDisabled=!0,t.$refs[a].showModal(e.contractType)})}}},n.contractName)}},{title:"乙方信息",key:"yifangName"},{title:"合同金额",key:"sumMoney"},{title:"签订日期",key:"signDate",render:function(e,a){return e("div",t.$moment(a.row.signDate).format("YYYY年MM月DD日"))}},{align:"center",title:"审核状态",key:"auditStatus",fixed:"right",width:120,render:function(e,a){return t.getAuditDetail(e,a)}}]}},created:function(){this.getYiFangInfo(),this.getBudgetGist(),this.searchList()},methods:{searchList:function(){var t=this;t.search(t.getNewSearchData(),function(e,a){if(e){var n=a.data;t.contractList=n.contractList,t.total=n.totalCount}})},getBudgetGist:function(){var t=this;t.$Spin.show(),t.commonUtil.ajaxGetUtil("/contract/searchBudgetGist",{},function(e){t.$Spin.hide(),1===e.code?t.budgetGist=e.data:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},getYiFangInfo:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxGetUtil("/contract/searchYiFang",{},function(e){t.$Spin.hide(),1===e.code?t.yifangList=e.data:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},confirmSelect:function(){var t=this,e=this.contractModal;if(e){var a=this.contractTypeList[e].modal;this.contractId=null,this.$nextTick(function(){t.isDisabled=!1,t.isCreate=!0,t.$refs[a].showModal(e),t.showSelect=!1,t.contractModal=null})}else this.$Message.warning("您未选中任何选项")},isShowScreen:function(t){this.isScreen=t},handleAdd:function(){this.showSelect=!0},handleModify:function(){var t=this;if(t.isSelected){var e=i()({},t.currentRow),a=-1!==[2,3].indexOf(e.auditStatus),n=e.contractType,r=t.contractTypeList[n].modal;t.contractId=e.contractId,t.$nextTick(function(){t.isCreate=!1,t.isDisabled=!a,t.$refs[r].showModal(n),t.contractModal=null})}else t.$Message.warning("您未选择需要修改的内容")},handleDelete:function(){this.deleteData("/contract/deleteContract/","contractId")}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-info"},[a("Crumbs",{attrs:{"parent-manage":"合同管理","children-manage":"合同信息"},on:{isShowScreen:t.isShowScreen}}),t._v(" "),t.isScreen?a("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[a("Form",{attrs:{model:t.searchData,"label-width":85}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"合同类别"}},[a("Select",{attrs:{transfer:"",filterable:"",clearable:""},model:{value:t.searchData.contractType,callback:function(e){t.$set(t.searchData,"contractType",e)},expression:"searchData.contractType"}},t._l(t.contractTypeList,function(e,n){return a("Option",{key:n,attrs:{value:parseInt(n)}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"乙方单位"}},[a("Select",{attrs:{transfer:"",filterable:"",clearable:""},model:{value:t.searchData.yifangId,callback:function(e){t.$set(t.searchData,"yifangId",e)},expression:"searchData.yifangId"}},t._l(t.yifangList,function(e){return a("Option",{key:e.id,attrs:{value:parseInt(e.id)}},[t._v(t._s(e.name))])}),1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px"}},[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"签约开始时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.startTimeOptions,placeholder:"请选择签约开始时间",placement:"bottom-start"},on:{"on-change":t.startTimeChange},model:{value:t.searchData.startTime,callback:function(e){t.$set(t.searchData,"startTime",e)},expression:"searchData.startTime"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"签约结束时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.endTimeOptions,placeholder:"请选择签约结束时间",placement:"bottom-start"},on:{"on-change":t.endTimeChange},model:{value:t.searchData.endTime,callback:function(e){t.$set(t.searchData,"endTime",e)},expression:"searchData.endTime"}})],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px","text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("确认")])],1)],1)],1):t._e(),t._v(" "),a("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v("\n      新增\n    ")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:t.handleModify}},[t._v("\n      修改\n    ")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:t.handleDelete}},[t._v("\n      删除\n    ")]),t._v(" "),a("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(15)}}},[t._v("\n      打印\n    ")]),t._v(" "),a("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/contract/exportContractListExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),a("Table",{ref:"tableContent",staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{"highlight-row":"",columns:t.columns,data:t.contractList},on:{"on-current-change":t.selectRow}}),t._v(" "),a("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}}),t._v(" "),a("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:t.showSelect,callback:function(e){t.showSelect=e},expression:"showSelect"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("\n        请选择合同基本信息\n      ")]),t._v(" "),a("RadioGroup",{model:{value:t.contractModal,callback:function(e){t.contractModal=e},expression:"contractModal"}},t._l(t.contractTypeList,function(e,n){return a("Radio",{key:n,attrs:{label:parseInt(n)}},[t._v(t._s(e.name))])}),1),t._v(" "),a("p",{staticStyle:{"text-align":"left","padding-bottom":"30px"},attrs:{slot:"footer"},slot:"footer"},[t.isDisabled?t._e():a("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(e){t.showSelect=!1}}},[t._v("\n          取消\n        ")]),t._v(" "),t.isDisabled?t._e():a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.confirmSelect()}}},[t._v("\n          确认\n        ")])],1)],1),t._v(" "),a("construction-model",{ref:"constructionModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-create":t.isCreate,"is-disabled":t.isDisabled},on:{refreshList:t.searchList}}),t._v(" "),a("setUpModel",{ref:"setUpModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-create":t.isCreate,"is-disabled":t.isDisabled},on:{refreshList:t.searchList}}),t._v(" "),a("entrustModel",{ref:"entrustModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-create":t.isCreate,"is-disabled":t.isDisabled},on:{refreshList:t.searchList}})],1),t._v(" "),a("audit",{ref:"audit",attrs:{form:t.auditForm}})],1)},staticRenderFns:[]};var h=a("VU/8")(u,p,!1,function(t){a("fgLB")},"data-v-3ada02b2",null);e.default=h.exports},fgLB:function(t,e){}});
//# sourceMappingURL=23.5728ed55461dc5f7a8d1.js.map