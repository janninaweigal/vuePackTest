webpackJsonp([37],{PGQh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r),o=a("BO1k"),i=a.n(o),n=a("J8Iu"),l=a("9c+7"),c={name:"OrganizeManage",components:{uploadFile:n.a},mixins:[l.a],data:function(){var e=this;return{total:0,curTab:"name1",isDisabled:!1,isSelected:!1,transferValue:!0,characters:[{value:1,label:"政府机关"},{value:3,label:"合作组织"},{value:4,label:"企业法人"},{value:2,label:"事业法人"}],curDate:{},form:{orgName:"",orgType:"",orgAddr:"",orgRemark:""},ruleValidateType:{orgName:[{required:!0,message:"请填写机构名称",trigger:"change"}],orgType:[{type:"number",required:!0,message:"请选择机构性质",trigger:"change"}]},searchData:{orgType:"",orgName:"",ascending:!1,orderBy:"orgId",pageNo:1,pageSize:10},isScreen:!1,curTime:"",showContact:!1,selTypeMod:!1,checkText:"提交审核",columns:[{type:"index",title:"序号",width:60,align:"center",indexMethod:this.indexMethod},{title:"机构名称",key:"orgId",render:function(t,a){return t("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){e.showInfo(a.row)}}},a.row.orgName)}},{width:160,title:"机构性质",key:"orgTypeName"},{title:"机构地址",key:"orgAddr"}],data:[],currentRow:{},isCreate:!1}},mounted:function(){this.searchList();var e=(new Date).toLocaleString("chinese",{hour12:!1});this.curTime=e.substring(0,15)},methods:{pageNoChange:function(e){e&&(this.searchData.pageNo=e,this.searchList())},pageSizeChange:function(e){e&&(this.searchData.pageSize=e,this.searchList())},delData:function(){var e=this;e.isSelected?e.$Modal.confirm({title:"删除",content:"确认删除此数据吗？",onOk:function(){e.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),e.commonUtil.ajaxDeleteUtil("/organization/deleteOrganization/"+e.currentRow.orgId,function(t){e.$Spin.hide(),1===t.code?(e.isSelected=!1,e.$Message.success(t.msg),e.searchList()):e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e)}}):e.$Message.warning("您未选择需要删除的内容")},searchList:function(e){var t=this;t.$Spin.show(),t.commonUtil.ajaxPostUtil("/organization/searchOrganization/list",t.searchData,function(a){if(t.$Spin.hide(),1===a.code){var r=!0,s=!1,o=void 0;try{for(var n,l=i()(a.data.orgList);!(r=(n=l.next()).done);r=!0){var c=n.value,d=c.orgType;1===d?c.orgTypeName="政府机关":2===d?c.orgTypeName="事业法人":3===d?c.orgTypeName="合作组织":4===d&&(c.orgTypeName="企业法人")}}catch(e){s=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(s)throw o}}var p=a.data;t.total=p.totalCount,t.data=p.orgList,e&&e(p.orgList)}else t.$Message.error(a.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t),t.commonUtil.getAuditCountApi(t)},selectRow:function(e){this.currentRow=e,this.isSelected=!0},modifyData:function(){var e=s()({},this.currentRow);this.isCreate=!1,this.isDisabled=!1,this.clearFormData(),this.isSelected?this.showData(e):this.$Message.warning("您未选择需要修改的内容")},exportPdf:function(){},clearFormData:function(){this.form={orgName:"",orgType:"",orgAddr:"",orgRemark:""},this.$refs.form.resetFields();var e=this.$refs.uploadFile;e&&e.clearFileItems()},createData:function(){this.clearFormData(),this.curTab="name1",this.isDisabled=!1,this.isCreate=!0,this.selTypeMod=!0},submitType:function(e){var t=this,a=t.form;a.fileIds=t.$refs.uploadFile.getFileIds(),t.$refs[e].validate(function(e){if(e){if(t.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),e("div","加载中")])}}),t.isCreate)t.commonUtil.ajaxPostUtil("/organization/addOrganization",a,function(e){t.$Spin.hide(),1===e.code?(t.selTypeMod=!1,t.$Message.success(e.msg),t.searchList()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t);else{var r=s()({},a);r.orgId=t.currentRow.orgId,t.commonUtil.ajaxPutUtil("/organization/updateOrganization",r,function(e){t.$Spin.hide(),1===e.code?(t.selTypeMod=!1,t.$Message.success(e.msg),t.searchList()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)}t.currentRow={}}else t.$Message.error("请填写好信息")})},isShowScreen:function(){this.searchList()},showInfo:function(e){var t=s()({},e);this.clearFormData(),this.isDisabled=!0,this.showData(t)},showData:function(e){var t=this;this.form=e,this.$nextTick(function(){t.$refs.uploadFile.getFileItems()}),this.selTypeMod=!0}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Breadcrumb",{staticClass:"breadcrumb"},[r("BreadcrumbItem",[r("Icon",{attrs:{type:"ios-home-outline"}}),e._v("基础设置\n    ")],1),e._v(" "),r("BreadcrumbItem",{staticClass:"curBreadcrumb"},[r("Icon",{attrs:{type:"logo-buffer"}}),e._v(" 机构设置\n    ")],1),e._v(" "),r("span",{staticClass:"screenContent"},[r("img",{staticStyle:{width:"11px","margin-right":"8px","margin-left":"10px"},attrs:{src:a("hmnq")}}),e._v("\n      "+e._s(e.curTime))]),e._v(" "),r("span",{staticClass:"screenContent"},[r("img",{staticStyle:{width:"10.5px","margin-right":"8px"},attrs:{src:a("0dlO")}}),e._v(" "),r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.isScreen=!e.isScreen}}},[e._v("\n        筛选\n        "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1),e._v(" "),e.isScreen?r("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[r("Form",{attrs:{model:e.searchData,"label-width":62}},[r("Row",[r("Col",{attrs:{xs:{span:5},lg:{span:6}}},[r("FormItem",{attrs:{label:"机构名称"}},[r("Input",{attrs:{clearable:"",placeholder:"请填写机构名称"},model:{value:e.searchData.orgName,callback:function(t){e.$set(e.searchData,"orgName",t)},expression:"searchData.orgName"}})],1)],1),e._v(" "),r("Col",{attrs:{xs:{span:11,offset:1},lg:{span:6}}},[r("FormItem",{attrs:{label:"机构性质"}},[r("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择机构性质"},model:{value:e.searchData.orgType,callback:function(t){e.$set(e.searchData,"orgType",t)},expression:"searchData.orgType"}},e._l(e.characters,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),e._v(" "),r("Col",{staticStyle:{"text-align":"right"},attrs:{xs:{span:1},lg:{span:2,offset:1}}},[r("Button",{attrs:{type:"primary"},on:{click:e.isShowScreen}},[e._v("\n          确认\n        ")])],1)],1)],1)],1):e._e(),e._v(" "),r("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.createData}},[e._v("\n      新增\n    ")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:e.modifyData}},[e._v("\n      修改\n    ")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:e.delData}},[e._v("\n      删除\n    ")]),e._v(" "),r("Button",{attrs:{icon:"md-print"},on:{click:function(t){return t.stopPropagation(),e.printContent(1)}}},[e._v("\n      打印\n    ")]),e._v(" "),r("Button",{attrs:{icon:"md-exit"},on:{click:function(t){return e.excelExcel("/organization/exportOrgListExcel")}}},[e._v("\n      导出\n    ")]),e._v(" "),r("Table",{ref:"checkTable",staticClass:"table",attrs:{"highlight-row":"",columns:e.columns,data:e.data},on:{"on-current-change":e.selectRow}}),e._v(" "),r("Page",{staticStyle:{"text-align":"right"},attrs:{total:e.total,current:e.searchData.pageNo,"page-size":e.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":e.pageNoChange,"on-page-size-change":e.pageSizeChange}}),e._v(" "),r("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:e.selTypeMod,callback:function(t){e.selTypeMod=t},expression:"selTypeMod"}},[r("p",{attrs:{slot:"header"},slot:"header"},[!e.isDisabled&&e.isCreate?r("span",[e._v("请设置机构信息")]):r("span",[e._v("机构信息")])]),e._v(" "),r("Tabs",{staticClass:"innerTabStyle",attrs:{animated:!1,value:e.curTab}},[r("TabPane",{attrs:{label:"信息设置",name:"name1"}},[r("Form",{ref:"form",attrs:{model:e.form,rules:e.ruleValidateType,"label-width":80}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"机构名称",prop:"orgName"}},[r("Input",{attrs:{disabled:e.isDisabled,placeholder:"请填写机构名称"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName","string"==typeof t?t.trim():t)},expression:"form.orgName"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"机构性质",prop:"orgType"}},[r("Select",{attrs:{clearable:"",disabled:e.isDisabled,transfer:e.transferValue,filterable:""},model:{value:e.form.orgType,callback:function(t){e.$set(e.form,"orgType",t)},expression:"form.orgType"}},e._l(e.characters,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"机构地址"}},[r("Input",{attrs:{disabled:e.isDisabled,type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"请填写机构地址"},model:{value:e.form.orgAddr,callback:function(t){e.$set(e.form,"orgAddr","string"==typeof t?t.trim():t)},expression:"form.orgAddr"}})],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"备注"}},[r("Input",{attrs:{disabled:e.isDisabled,type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"请填写备注"},model:{value:e.form.orgRemark,callback:function(t){e.$set(e.form,"orgRemark","string"==typeof t?t.trim():t)},expression:"form.orgRemark"}})],1)],1)],1)],1)],1),e._v(" "),r("TabPane",{staticClass:"uploadStyle",attrs:{label:"附件",name:"name2"}},[r("uploadFile",{ref:"uploadFile",attrs:{"is-disabled":e.isDisabled,form:e.form}})],1)],1),e._v(" "),r("p",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{icon:"md-print"}},[e._v("\n          打印\n        ")]),e._v(" "),r("Button",{attrs:{icon:"md-exit"},on:{click:e.exportPdf}},[e._v("\n          导出\n        ")]),e._v(" "),e.isDisabled?e._e():r("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(t){e.selTypeMod=!1}}},[e._v("\n          取消\n        ")]),e._v(" "),e.isDisabled?e._e():r("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.submitType("form")}}},[e._v("\n          确认\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},p=a("VU/8")(c,d,!1,null,null,null);t.default=p.exports}});
//# sourceMappingURL=37.2fdf9a7d11f023e9fd53.js.map