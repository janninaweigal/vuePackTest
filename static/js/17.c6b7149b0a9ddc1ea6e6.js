webpackJsonp([17],{G5Ld:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("woOf"),i=n.n(a),o=n("QeYY"),s=n("SuqQ"),r=n("a5i8"),c=n("CyoZ"),l=n("94jl"),d=n("7s5I"),u={name:"ActualForm",components:{Crumbs:o.a,constructionModel:s.a,setUpModel:r.a,entrustModel:c.a,audit:d.a},mixins:[l.a],data:function(){var t=this;return{contractId:null,signGist:{1:"比选",2:"招标",3:"其他"},budgetGist:{},contractAttr:{1:"新签合同",2:"补充合同"},isScreen:!1,contractTypeList:{1:{modal:"constructionModel",name:"建设工程施工合同"},2:{modal:"setUpModel",name:"设备购置合同"},3:{modal:"entrustModel",name:"委托业务合同"}},searchData:{contractName:"",ascending:!1,orderBy:"",pageNo:1,pageSize:10},implementationModelList:[],listUrl:"/contract/searchImplementation",yifangList:[],columns:[{title:"合同名称",key:"contractName",render:function(e,n){var a=n.row;return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){var e=i()({},a),n=t.contractTypeList[e.contractType].modal;t.contractId=e.contractId,t.$nextTick(function(){t.isDisabled=!0,t.$refs[n].showModal(e.contractType)})}}},a.contractName)}},{title:"总额",key:"allMoney"},{title:"应付",key:"sumYinfu"},{title:"实付",key:"sumShifu"},{title:"发票金额",key:"billMoney"},{title:"支付比例",key:"scale"}]}},created:function(){this.getYiFangInfo(),this.getBudgetGist(),this.searchList()},methods:{searchList:function(){var t=this;t.search(t.getNewSearchData(),function(e,n){if(e){var a=n.data;t.implementationModelList=a.implementationModelList,t.total=a.totalCount}})},getBudgetGist:function(){var t=this;t.$Spin.show(),t.commonUtil.ajaxGetUtil("/contract/searchBudgetGist",{},function(e){t.$Spin.hide(),1===e.code?t.budgetGist=e.data:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},getYiFangInfo:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxGetUtil("/contract/searchYiFang",{},function(e){t.$Spin.hide(),1===e.code?t.yifangList=e.data:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},isShowScreen:function(t){this.isScreen=t},handleCancel:function(){},handleConfirm:function(){}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"actual-form"},[n("Crumbs",{attrs:{"parent-manage":"合同管理","children-manage":"执行情况"},on:{isShowScreen:t.isShowScreen}}),t._v(" "),t.isScreen?n("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[n("Form",{attrs:{model:t.searchData,"label-width":85}},[n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"合同名称"}},[n("Input",{attrs:{placeholder:"请填写合同名称",clearable:""},model:{value:t.searchData.contractName,callback:function(e){t.$set(t.searchData,"contractName",e)},expression:"searchData.contractName"}})],1)],1),t._v(" "),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"11",offset:"2"}},[n("Button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("确认")])],1)],1)],1)],1):t._e(),t._v(" "),n("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[n("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(22)}}},[t._v("\n      打印\n    ")]),t._v(" "),n("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/contract/exportImplementationListExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),n("Table",{ref:"tableContent",staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{"highlight-row":"",columns:t.columns,data:t.implementationModelList},on:{"on-current-change":t.selectRow}}),t._v(" "),n("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}})],1),t._v(" "),n("construction-model",{ref:"constructionModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-disabled":""},on:{refreshList:t.searchList}}),t._v(" "),n("setUpModel",{ref:"setUpModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-disabled":""},on:{refreshList:t.searchList}}),t._v(" "),n("entrustModel",{ref:"entrustModel",attrs:{"contract-id":t.contractId,"sign-gist":t.signGist,"contract-attr":t.contractAttr,"budget-gist":t.budgetGist,"is-disabled":""},on:{refreshList:t.searchList}}),t._v(" "),n("audit",{ref:"audit",attrs:{form:t.auditForm}})],1)},staticRenderFns:[]};var m=n("VU/8")(u,g,!1,function(t){n("n7t2")},"data-v-4a8c0a1c",null);e.default=m.exports},n7t2:function(t,e){}});
//# sourceMappingURL=17.c6b7149b0a9ddc1ea6e6.js.map