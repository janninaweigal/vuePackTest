webpackJsonp([33],{UHx4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),n=i.n(a),r=i("QeYY"),o={name:"Bidding",components:{mulUploadFile:i("LC7k").a},props:{isDisabled:{type:Boolean,default:!1},isCreate:{type:Boolean,default:!1},organizationalForm:{type:Object,default:function(){}},billType:{type:Object,default:function(){}}},data:function(){return{uploadList:{1:"证件",2:"一卡通",3:"核查记录表",4:"坐标表",5:"核定图",6:"图像记录"},isPop:!1,form:{id:null,bidding_unit:"",person_charge:"",code:"",phone:"",bidding_name:"",organizational_form:"",type:"",start_bidding_time:"",proxy_org:"",winning_bid_org:"",winning_bid_money:null,remark:""},ruleValidateType:{bidding_unit:[{required:!0,message:"请填写招投标单位",trigger:"blur"}],person_charge:[{required:!0,message:"请填写负责人",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"}],bidding_name:[{required:!0,message:"请填写标段名称",trigger:"blur"}],code:[{required:!0,message:"请填写编号",trigger:"blur"}],organizational_form:[{type:"number",required:!0,message:"请选择组织形式",trigger:"change"}],bidding_type:[{type:"number",required:!0,message:"请选择招标类型",trigger:"change"}],start_bidding_time:[{type:"date",required:!0,message:"请填写开标时间",trigger:"blur"}],proxy_org:[{required:!0,message:"请填写代理机构",trigger:"blur"}],winning_bid_org:[{required:!0,message:"请填写中标单位",trigger:"blur"}],winning_bid_money:[{type:"number",required:!0,message:"请填写中标金额",trigger:"blur"}]}}},methods:{handleCancel:function(e){this.$refs[e].resetFields(),this.isPop=!1},handleConfirm:function(e){var t=this,i=this;i.$refs[e].validate(function(e){if(e){var a=i.isCreate,r=a?"/bidding/addBidding":"/bidding/updateBidding",o=n()({},i.form);o.start_bidding_time=new Date(o.start_bidding_time).getTime(),o.relationFileIds=t.$refs.uploadFile.getFileIds(),i.$Spin.show(),i.commonUtil.ajaxCommonUtil(a,r,o,function(e){i.$Spin.hide(),1===e.code?(i.isPop=!1,i.$Message.success(e.msg),i.$emit("refreshList")):i.$Message.error(e.msg)},function(){i.$Message.error("网络连接错误"),i.$Spin.hide()},i)}else i.$Message.error("请填写好信息")})},showModal:function(e){var t=this;t.clearForm(),e?(t.$Spin.show(),t.commonUtil.ajaxGetUtil("/bidding/searchBiddingDetails/"+e,{},function(e){if(t.$Spin.hide(),1===e.code){var i=e.data;i.start_bidding_time=new Date(i.start_bidding_time),t.form=i,t.$nextTick(function(){t.$refs.uploadFile.getFileItems(i.relationFileids),t.isPop=!0})}else t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)):t.isPop=!0},clearForm:function(){this.form={id:null,bidding_unit:"",person_charge:"",phone:"",code:"",bidding_name:"",organizational_form:"",type:"",start_bidding_time:"",proxy_org:"",winning_bid_org:"",winning_bid_money:null,remark:""},this.$refs.form.resetFields();var e=this.$refs.uploadFile;e&&e.clearFileItems()}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bidding"},[i("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:e.isPop,callback:function(t){e.isPop=t},expression:"isPop"}},[i("p",{attrs:{slot:"header"},slot:"header"},[e.isDisabled?i("span",[e._v("粮食直补信息")]):i("span",[e._v("请添加粮食直补信息")])]),e._v(" "),i("Tabs",{staticClass:"innerTabStyle",attrs:{animated:!1,value:"name1"}},[i("TabPane",{attrs:{label:"信息设置",name:"name1"}},[i("Form",{ref:"form",attrs:{model:e.form,rules:e.ruleValidateType,"label-width":85}},[i("Row",[i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"资金类别",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写资金类别"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"主管单位",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写主管单位"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"核查批次",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写核查批次"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"核查对象",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写核查对象"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"镇",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写镇"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"村",prop:"bidding_unit"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写村"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit","string"==typeof t?t.trim():t)},expression:"form.bidding_unit"}})],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"证件类型",prop:"code"}},[i("CheckboxGroup",{model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit",t)},expression:"form.bidding_unit"}},[i("Checkbox",{attrs:{label:"身份证"}}),e._v(" "),i("Checkbox",{attrs:{label:"营业执照"}}),e._v(" "),i("Checkbox",{attrs:{label:"其他"}})],1)],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"证件号码",prop:"idNum"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写证件号码"},model:{value:e.form.idNum,callback:function(t){e.$set(e.form,"idNum","string"==typeof t?t.trim():t)},expression:"form.idNum"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"联系方式",prop:"phone"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写联系方式"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"申报面积",prop:"applayArea"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写申报面积"},model:{value:e.form.applayArea,callback:function(t){e.$set(e.form,"applayArea","string"==typeof t?t.trim():t)},expression:"form.applayArea"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("FormItem",{attrs:{label:"核定面积",prop:"applyArea"}},[i("Input",{attrs:{disabled:e.isDisabled,clearable:"",placeholder:"请填写核定面积"},model:{value:e.form.applyArea,callback:function(t){e.$set(e.form,"applyArea","string"==typeof t?t.trim():t)},expression:"form.applyArea"}})],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"耕种条件",prop:"code"}},[i("CheckboxGroup",{model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit",t)},expression:"form.bidding_unit"}},[i("Checkbox",{attrs:{label:"符合要求"}}),e._v(" "),i("Checkbox",{attrs:{label:"不符合要求"}})],1)],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"种植作物",prop:"code"}},[i("CheckboxGroup",{model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit",t)},expression:"form.bidding_unit"}},[i("Checkbox",{attrs:{label:"小麦"}}),e._v(" "),i("Checkbox",{attrs:{label:"玉米"}}),e._v(" "),i("Checkbox",{attrs:{label:"水稻"}}),e._v(" "),i("Checkbox",{attrs:{label:"甘薯"}}),e._v(" "),i("Checkbox",{attrs:{label:"马铃薯"}}),e._v(" "),i("Checkbox",{attrs:{label:"其他"}})],1)],1)],1)],1),e._v(" "),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"备注",prop:"bidding_unit"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请填写备注"},model:{value:e.form.bidding_unit,callback:function(t){e.$set(e.form,"bidding_unit",t)},expression:"form.bidding_unit"}})],1)],1)],1)],1)],1),e._v(" "),i("TabPane",{attrs:{label:"附件",name:"name7"}},[i("mulUploadFile",{ref:"uploadFile",attrs:{"is-disabled":e.isDisabled,"upload-list":e.uploadList}})],1)],1),e._v(" "),i("p",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{icon:"md-print"}},[e._v("打印")]),e._v(" "),i("Button",{attrs:{icon:"md-exit"}},[e._v("导出")]),e._v(" "),e.isDisabled?e._e():i("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(t){return e.handleCancel("form")}}},[e._v("\n        取消\n      ")]),e._v(" "),e.isDisabled?e._e():i("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("form")}}},[e._v("\n        确认\n      ")])],1)],1)],1)},staticRenderFns:[]},l=i("VU/8")(o,s,!1,null,null,null).exports,d=i("94jl"),c=i("7s5I"),p={name:"Bidding",components:{Crumbs:r.a,biddModal:l,audit:c.a},mixins:[d.a],data:function(){return{organizationalForm:{1:"公开",2:"竞争性磋商",3:"竞争性谈判"},billType:{1:"政采",2:"其他"},isScreen:!1,searchData:{bidding_name:"",winning_bid_org:"",ascending:!1,orderBy:"id",pageNo:1,pageSize:10},binddingList:[],selTypeMod:!1,isDisabled:!1,listUrl:"/bidding/searchBidding/list",columns:[{type:"index",title:"序号",width:60,align:"center",fixed:"left",indexMethod:this.indexMethod},{title:"资金类别",key:"categoryw "},{width:160,title:"主管单位",key:"company"},{title:"核查批次",key:"batch"},{title:"镇",key:"town"},{title:"村",key:"village"},{title:"核查对象",key:"check"},{title:"作物",key:"crop"},{title:"申报面积",key:"Applyarea"},{title:"核定面积",key:"area"},{title:"编码",key:"code"}]}},created:function(){this.searchList()},methods:{searchList:function(){var e=this;e.search(e.getNewSearchData(),function(t,i){t&&(e.binddingList=[{categoryw:"粮食直补",company:"滨海新区农业农村委员会",batch:"19年秋",town:"滨海街",village:"滨海村",check:"张三",crop:"玉米",Applyarea:"150",area:"150",code:""}])})},isShowScreen:function(e){this.isScreen=e},handleAdd:function(){this.isCreate=!0,this.isDisabled=!1,this.$refs.biddModal.showModal()},handleModify:function(){var e=this;if(e.isSelected){var t=n()({},e.currentRow),i=-1!==[2,3].indexOf(t.auditStatus);e.$nextTick(function(){e.isCreate=!1,e.isDisabled=!i,e.$refs.biddModal.showModal(t.id)})}else e.$Message.warning("您未选择需要修改的内容")},handlePrint:function(){},handleExport:function(){},handleDelete:function(){this.deleteData("/bidding/deleteBidding/","id")}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bidding"},[i("Crumbs",{attrs:{"parent-manage":"粮食直补","children-manage":"粮食直补"},on:{isShowScreen:e.isShowScreen}}),e._v(" "),e.isScreen?i("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[i("Form",{attrs:{model:e.searchData,"label-width":85}},[i("Row",[i("Col",{attrs:{span:"11"}},[i("FormItem",{attrs:{label:"招标名称"}},[i("Input",{attrs:{placeholder:"请填写招标名称"},model:{value:e.searchData.bidding_name,callback:function(t){e.$set(e.searchData,"bidding_name","string"==typeof t?t.trim():t)},expression:"searchData.bidding_name"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"11",offset:"2"}},[i("FormItem",{attrs:{label:"中标单位"}},[i("Input",{attrs:{placeholder:"请填写中标单位"},model:{value:e.searchData.winning_bid_org,callback:function(t){e.$set(e.searchData,"winning_bid_org","string"==typeof t?t.trim():t)},expression:"searchData.winning_bid_org"}})],1)],1)],1),e._v(" "),i("Row",{staticStyle:{"margin-top":"15px"}},[i("Col",{attrs:{span:"11"}},[i("FormItem",{attrs:{label:"开标开始时间"}},[i("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:e.startTimeOptions,placeholder:"请选择开标开始时间",placement:"bottom-start"},on:{"on-change":e.startTimeChange},model:{value:e.searchData.startTime,callback:function(t){e.$set(e.searchData,"startTime",t)},expression:"searchData.startTime"}})],1)],1),e._v(" "),i("Col",{attrs:{span:"11",offset:"2"}},[i("FormItem",{attrs:{label:"开标结束时间"}},[i("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:e.endTimeOptions,placeholder:"请选择开标结束时间",placement:"bottom-start"},on:{"on-change":e.endTimeChange},model:{value:e.searchData.endTime,callback:function(t){e.$set(e.searchData,"endTime",t)},expression:"searchData.endTime"}})],1)],1)],1),e._v(" "),i("Row",{staticStyle:{"margin-top":"15px","text-align":"right"}},[i("Button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("确认")])],1)],1)],1):e._e(),e._v(" "),i("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.handleAdd}},[e._v("\n      新增\n    ")]),e._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:e.handleModify}},[e._v("\n      修改\n    ")]),e._v(" "),i("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:e.handleDelete}},[e._v("\n      删除\n    ")]),e._v(" "),i("Button",{attrs:{icon:"md-print"},on:{click:function(t){return t.stopPropagation(),e.printContent(17)}}},[e._v("\n      打印\n    ")]),e._v(" "),i("Button",{attrs:{icon:"md-exit"},on:{click:function(t){return e.excelExcel("/bidding/exportBiddingListExcel")}}},[e._v("\n      导出\n    ")]),e._v(" "),i("Table",{staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{"highlight-row":"",columns:e.columns,data:e.binddingList},on:{"on-current-change":e.selectRow}}),e._v(" "),i("Page",{staticStyle:{"text-align":"right"},attrs:{total:e.total,current:e.searchData.pageNo,"page-size":e.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":e.pageNoChange,"on-page-size-change":e.pageSizeChange}})],1),e._v(" "),i("audit",{ref:"audit",attrs:{form:e.auditForm}}),e._v(" "),i("biddModal",{ref:"biddModal",attrs:{"is-create":e.isCreate,"is-disabled":e.isDisabled,"organizational-form":e.organizationalForm,"bill-type":e.billType},on:{refreshList:e.searchList}})],1)},staticRenderFns:[]},b=i("VU/8")(p,m,!1,null,null,null);t.default=b.exports}});
//# sourceMappingURL=33.2fef18faa582fc7ccfba.js.map