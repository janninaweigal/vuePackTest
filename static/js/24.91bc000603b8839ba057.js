webpackJsonp([24],{SSoQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),s=a.n(i),n=a("J8Iu"),r=a("9c+7"),o={name:"FundManage",components:{uploadFile:n.a},mixins:[r.a],data:function(){var t=this;return{total:0,isCreate:!1,isSelected:!1,isDisabled:!1,form:{capitalName:"",capitalRemark:""},ruleValidateType:{capitalName:[{required:!0,message:"请填写资金类别",trigger:"blur"}]},currentRow:{},searchData:{capitalName:"",ascending:!1,orderBy:"capitalId",pageNo:1,pageSize:10},isScreen:!1,curTime:"",showContact:!1,selTypeMod:!1,checkText:"提交审核",columns:[{type:"index",title:"序号",width:60,align:"center",indexMethod:function(e){var a=e._index;return t.searchData.pageSize*(t.searchData.pageNo-1)+a+1}},{title:"资金类别",render:function(e,a){return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){t.showInfo(a.row)}}},a.row.capitalName)}}],data:[]}},mounted:function(){this.getFundData();var t=(new Date).toLocaleString("chinese",{hour12:!1});this.curTime=t.substring(0,15)},methods:{pageNoChange:function(t){this.searchData.pageNo=t,this.getFundData()},pageSizeChange:function(t){this.searchData.pageSize=t,this.getFundData()},getFundData:function(){var t=this;t.$set(t,"data",[]),t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxPostUtil("/capital/searchCapital/list",t.searchData,function(e){if(t.$Spin.hide(),1===e.code){var a=e.data;t.total=a.totalCount,t.data=a.capitalList}else t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t),t.commonUtil.getAuditCountApi(t)},delData:function(){var t=this;t.isSelected?t.$Modal.confirm({title:"删除",content:"确认删除此数据吗？",onOk:function(){t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxDeleteUtil("/capital/deleteCapital/"+t.currentRow.capitalId,function(e){t.$Spin.hide(),1===e.code?(t.isSelected=!1,t.$Message.success(e.msg),t.getFundData()):t.$Message.error(e.msg)},function(e){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)}}):t.$Message.warning("您未选择需要删除的内容")},showInfo:function(t){var e=s()({},t);this.clearFormData(),this.isDisabled=!0,this.showData(e)},selectRow:function(t,e){this.currentRow=t,this.isSelected=!0},modifyData:function(){if(this.isCreate=!1,this.isDisabled=!1,this.clearFormData(),this.isSelected){var t=s()({},this.currentRow);this.showData(t)}else this.$Message.warning("您未选择需要修改的内容")},showData:function(t){var e=this;this.form=t,this.$nextTick(function(){e.$refs.uploadFile.getFileItems()}),this.selTypeMod=!0},clearFormData:function(){this.form={capitalName:"",capitalRemark:""},this.$refs.form.resetFields();var t=this.$refs.uploadFile;t&&t.clearFileItems()},createData:function(){this.isCreate=!0,this.clearFormData(),this.isDisabled=!1,this.selTypeMod=!0},submitType:function(t){var e=this,a=e.form;a.fileIds=e.$refs.uploadFile.getFileIds(),e.$refs[t].validate(function(t){t?(e.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),e.isCreate?e.commonUtil.ajaxPostUtil("/capital/addCapital",a,function(t){e.$Spin.hide(),1===t.code?(e.selTypeMod=!1,e.$Message.success(t.msg),e.getFundData()):e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e):e.commonUtil.ajaxPutUtil("/capital/updateCapital",a,function(t){e.$Spin.hide(),1===t.code?(e.selTypeMod=!1,e.$Message.success(t.msg),e.getFundData()):e.$Message.error(t.msg)},function(t){e.$Message.error("网络连接错误"),e.$Spin.hide()},e),e.currentRow={}):e.$Message.error("请填写好信息")})},resetType:function(t){this.$refs[t].resetFields(),this.selTypeMod=!1},isShowScreen:function(){this.isScreen=!this.isScreen}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Breadcrumb",{staticClass:"breadcrumb"},[i("BreadcrumbItem",[i("Icon",{attrs:{type:"ios-home-outline"}}),t._v("基础设置\n    ")],1),t._v(" "),i("BreadcrumbItem",{staticClass:"curBreadcrumb"},[i("Icon",{attrs:{type:"logo-buffer"}}),t._v(" 资金设置\n    ")],1),t._v(" "),i("span",{staticClass:"screenContent"},[i("img",{staticStyle:{width:"11px","margin-right":"8px","margin-left":"10px"},attrs:{src:a("hmnq")}}),t._v("\n      "+t._s(t.curTime))]),t._v(" "),i("span",{staticClass:"screenContent"},[i("img",{staticStyle:{width:"10.5px","margin-right":"8px"},attrs:{src:a("0dlO")}}),t._v(" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:t.isShowScreen}},[t._v("\n        筛选\n        "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1),t._v(" "),t.isScreen?i("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[i("Form",{attrs:{model:t.searchData,"label-width":62}},[i("Row",[i("Col",{attrs:{xs:{span:11},lg:{span:6}}},[i("FormItem",{attrs:{label:"资金类别"}},[i("Input",{attrs:{placeholder:"请填写资金类别"},model:{value:t.searchData.capitalName,callback:function(e){t.$set(t.searchData,"capitalName",e)},expression:"searchData.capitalName"}})],1)],1),t._v(" "),i("Col",{staticStyle:{"text-align":"right"},attrs:{xs:{span:1},lg:{span:2,offset:1}}},[i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.getFundData()}}},[t._v("\n          确认\n        ")])],1)],1)],1)],1):t._e(),t._v(" "),i("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.createData}},[t._v("\n      新增\n    ")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-create"},on:{click:t.modifyData}},[t._v("\n      修改\n    ")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"md-close"},on:{click:t.delData}},[t._v("\n      删除\n    ")]),t._v(" "),i("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(3)}}},[t._v("\n      打印\n    ")]),t._v(" "),i("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/capital/exportCapitalListExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),i("Table",{ref:"checkTable",staticClass:"table",attrs:{"highlight-row":"",columns:t.columns,data:t.data},on:{"on-current-change":t.selectRow}}),t._v(" "),i("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}}),t._v(" "),i("Modal",{staticClass:"selStyle specialWidth",attrs:{"mask-closable":!1},model:{value:t.selTypeMod,callback:function(e){t.selTypeMod=e},expression:"selTypeMod"}},[i("p",{attrs:{slot:"header"},slot:"header"},[!t.isDisabled&&t.isCreate?i("span",[t._v("请设置资金类别信息")]):i("span",[t._v("资金类别信息")])]),t._v(" "),i("Tabs",{staticClass:"innerTabStyle",attrs:{animated:!1,value:"name1"}},[i("TabPane",{attrs:{label:"信息设置",name:"name1"}},[i("Form",{ref:"form",attrs:{model:t.form,rules:t.ruleValidateType,"label-width":80}},[i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"资金类别",prop:"capitalName"}},[i("Input",{attrs:{disabled:t.isDisabled,placeholder:"请填写资金类别名称"},model:{value:t.form.capitalName,callback:function(e){t.$set(t.form,"capitalName","string"==typeof e?e.trim():e)},expression:"form.capitalName"}})],1)],1)],1),t._v(" "),i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"备注",prop:"capitalRemark"}},[i("Input",{attrs:{disabled:t.isDisabled,type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"请填写备注"},model:{value:t.form.capitalRemark,callback:function(e){t.$set(t.form,"capitalRemark","string"==typeof e?e.trim():e)},expression:"form.capitalRemark"}})],1)],1)],1)],1),t._v(" "),i("TabPane",{staticClass:"uploadStyle",attrs:{label:"附件",name:"name2"}},[i("uploadFile",{ref:"uploadFile",attrs:{"is-disabled":t.isDisabled,form:t.form,"is-pdf":!1}})],1)],1),t._v(" "),i("p",{staticStyle:{"text-align":"left"},attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{icon:"md-print"}},[t._v("\n          打印\n        ")]),t._v(" "),i("Button",{attrs:{icon:"md-exit"}},[t._v("\n          导出\n        ")]),t._v(" "),t.isDisabled?t._e():i("Button",{staticStyle:{float:"right","margin-left":"8px"},on:{click:function(e){return t.resetType("form")}}},[t._v("\n          取消\n        ")]),t._v(" "),t.isDisabled?t._e():i("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.submitType("form")}}},[t._v("\n          确认\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,c,!1,function(t){a("z91K")},null,null);e.default=l.exports},z91K:function(t,e){}});
//# sourceMappingURL=24.91bc000603b8839ba057.js.map