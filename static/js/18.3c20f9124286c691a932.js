webpackJsonp([18],{"5IWv":function(t,e){},ExYy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),r=a("woOf"),o=a.n(r),s=a("QeYY"),c=a("bLuo"),l=a("iOZI"),u=a("94jl"),h=a("T3YM"),d={name:"OriginalForm",components:{Crumbs:s.a,IncomeModel:c.a,PayModel:l.a},mixins:[u.a],data:function(){var t=this;return{isPop:!1,contractArray:{1:{modal:"income",name:"收入"},2:{modal:"pay",name:"支出"}},keMuArray:{1:"建工程",2:"费用",3:"其他"},jieOrDai:{1:"借",2:"贷"},incomeType:{1:"应收",2:"实收",3:"其他"},payType:{1:"应付",2:"实付",3:"其他"},searchData:{contractType:"",startTime:null,endTime:null,yifangId:null,ascending:!1,orderBy:"id",pageNo:1,pageSize:10},contractList:[],yiFangList:[],yiFangUnit:{},accountList:[],listUrl:"/specialAccount/searchSpecialAccount/list",columns:[{type:"index",title:"序号",width:60,align:"center",fixed:"left",indexMethod:this.indexMethod},{title:"日期",key:"date",render:function(e,a){return e("div",a.row.date?t.$moment(a.row.date).format("YYYY年MM月DD日"):"")}},{title:"凭证号",key:"pingzhen",render:function(e,a){var n=a.row;return e("span",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:function(){var e=o()({},n),a=e.shouzhi_type,i=t.contractArray[a].modal;e.date=new Date(e.date),t.$nextTick(function(){t.$refs[i].showModal(e)})}}},n.pingzhen)}},{title:"摘要",key:"zhaiyao"},{title:"对方科目",key:"duifang_kemu",render:function(e,a){var n=a.row;return n.totalFlag?e("span",{style:{fontWeight:"bold"}},"总计"):e("div",t.keMuArray[n.duifang_kemu])}},{title:"应收",key:"yingshou",render:function(t,e){var a=e.row;return a.totalFlag?t("span",{style:{fontWeight:"bold"}},a.yingshou):t("div",a.yingshou)}},{title:"实收",key:"shishou",render:function(t,e){var a=e.row;return a.totalFlag?t("span",{style:{fontWeight:"bold"}},a.shishou):t("div",a.shishou)}},{title:"应付",key:"yingfu",render:function(t,e){var a=e.row;return a.totalFlag?t("span",{style:{fontWeight:"bold"}},a.yingfu):t("div",a.yingfu)}},{title:"实付",key:"shifu",render:function(t,e){var a=e.row;return a.totalFlag?t("span",{style:{fontWeight:"bold"}},a.shifu):t("div",a.shifu)}},{title:"往来单位",key:"wanglai_danwei",render:function(e,a){var n=a.row.wanglai_danwei;return e("div",n?t.yiFangUnit[n]:"")}}],yinshouSum:"",shishouSum:"",yinfuSum:"",shifuSum:""}},computed:{shouSum:function(){var t=this.yinshouSum||0,e=this.shishouSum||0;return h.a.accSub(t,e)||""},fuSum:function(){var t=this.yinfuSum||0,e=this.shifuSum||0;return h.a.accSub(t,e)||""}},created:function(){this.getYiFangInfo(),this.getContractList(),this.searchList()},methods:{indexMethod:function(t){if(t.totalFlag)return"";var e=t._index;return this.searchData.pageSize*(this.searchData.pageNo-1)+e+1},searchList:function(){var t=this;t.search(t.getNewSearchData(),function(e,a){if(e){var n=a.data,r=!0,o=!1,s=void 0;try{for(var c,l=i()(n.specialAccountModelList);!(r=(c=l.next()).done);r=!0){var u=c.value;1===u.shouzhi_type?1===u.special_account_type?u.yingshou=u.jiefang_money:u.shishou=u.jiefang_money:1===u.special_account_type?u.yingfu=u.jiefang_money:u.shifu=u.jiefang_money}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}n.specialAccountModelList.push({totalFlag:!0,date:"",pingzhen:"",zhaiyao:"",duifang_kemu:"总计",yingshou:n.yinshouSum,shishou:n.shishouSum,yingfu:n.yinfuSum,shifu:n.shifuSum}),t.accountList=n.specialAccountModelList,t.total=n.totalCount,t.yinshouSum=n.yinshouSum,t.shishouSum=n.shishouSum,t.yinfuSum=n.yinfuSum,t.shifuSum=n.shifuSum}})},getYiFangInfo:function(){var t=this;t.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","加载中")])}}),t.commonUtil.ajaxGetUtil("/contract/searchYiFang",{},function(e){if(t.$Spin.hide(),1===e.code){var a=e.data,n={},r=!0,o=!1,s=void 0;try{for(var c,l=i()(a);!(r=(c=l.next()).done);r=!0){var u=c.value;n[u.id]=u.name}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}t.yiFangList=a,t.yiFangUnit=n}else t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},getContractList:function(){var t=this;t.$Spin.show(),t.commonUtil.ajaxPostUtil("/contract/searchContractList",{},function(e){t.$Spin.hide(),1===e.code?t.contractList=e.data.contractList:t.$Message.error(e.msg)},function(){t.$Message.error("网络连接错误"),t.$Spin.hide()},t)},isShowScreen:function(t){this.isPop=t}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"original-form"},[a("Crumbs",{attrs:{"parent-manage":"资金管理","children-manage":"应收应付报表"},on:{isShowScreen:t.isShowScreen}}),t._v(" "),t.isPop?a("Content",{staticClass:"content screenStyle",style:{padding:"24px",background:"#fff",marginBottom:"10px"}},[a("Form",{attrs:{model:t.searchData,"label-width":85}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"往来单位"}},[a("Select",{attrs:{transfer:"",filterable:"",clearable:""},model:{value:t.searchData.yifangId,callback:function(e){t.$set(t.searchData,"yifangId",e)},expression:"searchData.yifangId"}},t._l(t.yiFangList,function(e){return a("Option",{key:e.id,attrs:{value:parseInt(e.id)}},[t._v(t._s(e.name))])}),1)],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px"}},[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"日期开始时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.startTimeOptions,placeholder:"请选择日期开始时间",placement:"bottom-start"},on:{"on-change":t.startTimeChange},model:{value:t.searchData.startTime,callback:function(e){t.$set(t.searchData,"startTime",e)},expression:"searchData.startTime"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"日期结束时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",options:t.endTimeOptions,placeholder:"请选择日期结束时间",placement:"bottom-start"},on:{"on-change":t.endTimeChange},model:{value:t.searchData.endTime,callback:function(e){t.$set(t.searchData,"endTime",e)},expression:"searchData.endTime"}})],1)],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"15px","text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("确认")])],1)],1)],1):t._e(),t._v(" "),a("Content",{staticClass:"content",style:{padding:"14px 24px",minHeight:"220px",background:"#fff"}},[a("Button",{attrs:{icon:"md-print"},on:{click:function(e){return e.stopPropagation(),t.printContent(21)}}},[t._v("\n      打印\n    ")]),t._v(" "),a("Button",{attrs:{icon:"md-exit"},on:{click:function(e){return t.excelExcel("/specialAccount/exportSpecialAccountListExcel")}}},[t._v("\n      导出\n    ")]),t._v(" "),a("Table",{staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{"highlight-row":"",columns:t.columns,data:t.accountList},on:{"on-current-change":t.selectRow}}),t._v(" "),a("div",{staticStyle:{"font-weight":"bolder","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-left":"42%"}},[t._v("\n        应收未收："),a("span",{staticStyle:{"margin-left":"6%"}},[a("Icon",{attrs:{type:"logo-yen"}}),t._v(t._s(t.shouSum))],1)]),t._v(" "),a("span",{staticStyle:{"margin-left":"10%"}},[t._v("\n        应付未付："),a("span",{staticStyle:{"margin-left":"6%"}},[a("Icon",{attrs:{type:"logo-yen"}}),t._v(t._s(t.fuSum))],1)])]),t._v(" "),a("Page",{staticStyle:{"text-align":"right"},attrs:{total:t.total,current:t.searchData.pageNo,"page-size":t.searchData.pageSize,"show-sizer":"",transfer:""},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}})],1),t._v(" "),a("income-model",{ref:"income",attrs:{"jie-or-dai":t.jieOrDai,"ke-mu-array":t.keMuArray,"is-create":t.isCreate,"is-disabled":"","contract-type":t.incomeType},on:{refreshList:t.searchList}}),t._v(" "),a("pay-model",{ref:"pay",attrs:{"jie-or-dai":t.jieOrDai,"ke-mu-array":t.keMuArray,"is-create":t.isCreate,"is-disabled":"","contract-type":t.payType,"contract-list":t.contractList,"yi-fang-list":t.yiFangList},on:{refreshList:t.searchList}})],1)},staticRenderFns:[]};var m=a("VU/8")(d,f,!1,function(t){a("5IWv")},"data-v-49aa2184",null);e.default=m.exports}});
//# sourceMappingURL=18.3c20f9124286c691a932.js.map